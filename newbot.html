<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Aviator Admin Chat - Support System</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#1a1a1a">
    <meta name="description" content="Aviator Game Support Chat with Admin Panel">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Segoe UI', Roboto, Arial, sans-serif;
            background: #1a1a1a;
            color: #ffffff;
            height: 100vh;
            overflow: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #1a1a1a;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            color: white;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-top: 5px solid #ff4444;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 30px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* User Registration Modal */
        .user-registration-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .registration-form {
            background: #2a2a2a;
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .registration-form h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #ff4444;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #ffffff;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #444;
            border-radius: 8px;
            background: #333;
            color: #ffffff;
            font-size: 16px;
        }

        .form-group input:focus {
            outline: none;
            border-color: #ff4444;
        }

        .submit-btn {
            width: 100%;
            padding: 12px;
            background: #ff4444;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .submit-btn:hover {
            background: #ff6666;
        }

        /* Main App Container */
        .app-container {
            display: none;
            height: 100vh;
            flex-direction: column;
        }

        /* Mobile-First Design for 1080Ã—720 */
        body {
            font-family: 'Segoe UI', Roboto, Arial, sans-serif;
            background: #1a1a1a;
            color: #ffffff;
            height: 100vh;
            overflow: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            margin: 0;
            padding: 0;
        }

        /* Header - Top Toggle Design */
        .header {
            background: #2a2a2a;
            padding: 8px 12px;
            border-bottom: 2px solid #444;
            display: flex;
            flex-direction: column;
            gap: 8px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-top h2 {
            font-size: 16px;
            color: #ff4444;
            margin: 0;
            font-weight: 600;
        }

        .header-tabs {
            display: flex;
            flex-direction: row;
            gap: 4px;
            width: 100%;
            background: #333;
            border-radius: 8px;
            padding: 4px;
        }

        .tab {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #ffffff;
            text-decoration: none;
            font-size: 13px;
            font-weight: 600;
            flex: 1;
            justify-content: center;
            text-align: center;
            min-height: 36px;
        }

        .tab.active {
            background: #ff4444;
            color: white;
            box-shadow: 0 2px 4px rgba(255, 68, 68, 0.3);
        }

        .tab:not(.active):hover {
            background: #444;
        }

        .tab i {
            font-size: 14px;
        }

        .admin-panel-btn {
            background: #ff4444;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            display: none;
            transition: all 0.3s ease;
        }

        .admin-panel-btn:hover {
            background: #ff6666;
            transform: translateY(-1px);
        }

        /* Main Container - Mobile Optimized */
        .main-app {
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: #1a1a1a;
        }

        /* Chat Container - Mobile Optimized */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #1a1a1a;
            height: calc(100vh - 80px); /* Account for compact header */
        }

        /* FAQ Container - Mobile Optimized */
        .faq-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #1a1a1a;
            height: calc(100vh - 80px); /* Account for compact header */
        }

        /* Messages Area - Mobile Optimized */
        .messages-area {
            flex: 1;
            padding: 12px;
            overflow-y: auto;
            background: #1a1a1a;
            min-height: 150px;
            max-height: 65vh; /* More space for messages */
        }

        .message {
            display: flex;
            margin-bottom: 24px;
            align-items: flex-start;
            gap: 12px;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: #ff4444;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            box-shadow: 0 2px 8px rgba(255, 68, 68, 0.3);
        }

        .message-avatar i {
            color: white;
            font-size: 18px;
        }

        .message-content {
            background: #2a2a2a;
            padding: 16px 20px;
            border-radius: 18px;
            max-width: 75%;
            word-wrap: break-word;
            font-size: 15px;
            line-height: 1.5;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .message.user .message-content {
            background: #ff4444;
        }

        .message-time {
            font-size: 12px;
            color: #888;
            margin-top: 5px;
        }

        .message.user .message-time {
            text-align: right;
        }

        /* Quick Questions Section - Mobile Optimized */
        .quick-questions-section {
            background: #2a2a2a;
            border-top: 2px solid #444;
            padding: 10px 12px;
            display: block;
            transition: all 0.3s ease;
            position: sticky;
            bottom: 0;
            z-index: 50;
            min-height: 100px; /* Compact height */
        }

        .quick-questions-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .quick-questions-header h3 {
            font-size: 16px;
            font-weight: 600;
            color: #ffffff;
        }

        .quick-questions-toggle {
            background: #444;
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background 0.3s;
            font-size: 14px;
        }

        .quick-questions-toggle:hover {
            background: #555;
        }

        /* FAQ Dropdown Styles */
        .faq-dropdown {
            background: #333;
            border-radius: 8px;
            margin-bottom: 10px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .faq-dropdown-header {
            background: #444;
            padding: 18px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s;
        }

        .faq-dropdown-header:hover {
            background: #555;
        }

        .faq-dropdown-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .faq-dropdown-content.active {
            max-height: 500px;
        }

        .faq-item {
            padding: 16px 18px;
            border-bottom: 1px solid #444;
            background: #2a2a2a;
            font-size: 17px;
        }

        .faq-item:last-child {
            border-bottom: none;
        }

        .faq-question {
            font-weight: bold;
            color: #ff4444;
            margin-bottom: 10px;
            cursor: pointer;
        }

        .faq-answer {
            color: #ccc;
            line-height: 1.5;
            display: none;
        }

        .faq-answer.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        /* Icon Selector */
        .icon-selector {
            position: relative;
            display: inline-block;
        }

        .icon-selector-btn {
            background: #444;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .icon-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            background: #333;
            border: 1px solid #555;
            border-radius: 6px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
            grid-template-columns: repeat(6, 1fr);
            gap: 5px;
            padding: 10px;
            min-width: 300px;
        }

        .icon-dropdown.active {
            display: grid;
        }

        .icon-option {
            padding: 8px;
            text-align: center;
            cursor: pointer;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .icon-option:hover {
            background: #555;
        }

        .icon-option.selected {
            background: #ff4444;
        }

        /* Advanced Theme Editor */
        .advanced-theme-editor {
            background: #333;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .theme-section {
            margin-bottom: 20px;
        }

        .theme-section h5 {
            color: #ff4444;
            margin-bottom: 10px;
        }

        .color-input-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .color-input-group label {
            min-width: 120px;
        }

        .color-input {
            width: 50px;
            height: 30px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .color-preview {
            width: 30px;
            height: 30px;
            border-radius: 4px;
            border: 2px solid #555;
        }

        /* User Chat Management */
        .user-chat-list {
            background: #333;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .user-chat-item {
            background: #444;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .user-chat-item:hover {
            background: #555;
        }

        .user-chat-item.active {
            background: #ff4444;
        }

        /* Quick Question Management */
        .quick-question-manager {
            background: #333;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .category-manager {
            background: #444;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 10px;
        }

        .question-list {
            margin-left: 20px;
        }

        .question-item {
            background: #333;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 4px;
            border-left: 3px solid #ff4444;
        }

        .categories-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 6px;
            margin-bottom: 10px;
        }

        .category-btn {
            background: #444;
            color: white;
            border: none;
            padding: 6px 8px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 12px;
            font-weight: 500;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            min-height: 32px;
        }

        .category-btn:hover {
            background: #555;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .category-btn.active {
            background: #ff4444;
            box-shadow: 0 4px 12px rgba(255, 68, 68, 0.3);
        }

        .questions-container {
            display: none;
            grid-template-columns: 1fr;
            gap: 6px;
        }

        .question-btn {
            background: #333;
            color: white;
            border: none;
            padding: 8px 10px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            border-left: 3px solid #ff4444;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            line-height: 1.3;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            min-height: 36px;
        }

        .question-btn:hover {
            background: #444;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .question-btn i {
            font-size: 18px;
            color: #ff4444;
            flex-shrink: 0;
        }

        .chat-with-us-btn {
            background: linear-gradient(135deg, #ff4444, #ff6666);
            color: white;
            border: none;
            padding: 10px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 600;
            font-size: 13px;
            box-shadow: 0 3px 8px rgba(255, 68, 68, 0.3);
            margin-top: 8px;
            width: 100%;
            min-height: 40px;
        }

        .chat-with-us-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 68, 68, 0.4);
        }

        .chat-with-us-btn i {
            margin-right: 8px;
            font-size: 16px;
        }

        .waiting-message {
            background: #2a2a2a;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
            border-left: 4px solid #ff4444;
        }

        .waiting-message i {
            color: #ff4444;
            font-size: 24px;
            margin-bottom: 10px;
        }

        .quick-questions-collapsed {
            max-height: 200px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .quick-questions-expanded {
            max-height: none;
            transition: max-height 0.3s ease;
        }

        /* Input Area - Compact for Mobile */
        .input-area {
            background: #2a2a2a;
            padding: 16px;
            border-top: 2px solid #444;
            display: flex;
            gap: 10px;
            align-items: flex-end;
            min-height: 60px;
            position: sticky;
            bottom: 0;
            z-index: 60;
        }

        .message-input {
            flex: 1;
            background: #333;
            border: 2px solid #444;
            border-radius: 8px;
            padding: 12px 14px;
            color: white;
            font-size: 14px;
            resize: none;
            min-height: 44px;
            max-height: 100px;
            line-height: 1.4;
        }

        .message-input:focus {
            outline: none;
            border-color: #ff4444;
        }

        .send-btn {
            background: #ff4444;
            color: white;
            border: none;
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 2px 6px rgba(255, 68, 68, 0.3);
            min-width: 44px;
            min-height: 44px;
        }

        .send-btn:hover {
            background: #ff6666;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 68, 68, 0.4);
        }

        /* Admin Panel - Mobile Optimized */
        .admin-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #1a1a1a;
            z-index: 10000;
            display: none;
            flex-direction: column;
        }

        .admin-sidebar {
            background: #222;
            padding: 12px;
            border-bottom: 2px solid #444;
            display: flex;
            flex-direction: row;
            overflow-x: auto;
            gap: 8px;
        }

        .admin-sidebar-btn {
            background: #333;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-size: 12px;
            white-space: nowrap;
            min-width: 80px;
        }

        .admin-sidebar-btn:hover {
            background: #444;
        }

        .admin-sidebar-btn.active {
            background: #ff4444;
        }

        .admin-content {
            background: #1a1a1a;
            padding: 16px;
            overflow-y: auto;
            flex: 1;
        }

        .admin-section {
            display: none;
        }

        .admin-section.active {
            display: block;
        }

        .admin-section h2 {
            color: #ff4444;
            margin-bottom: 16px;
            font-size: 18px;
        }

        /* Theme Editor */
        .theme-editor {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .theme-presets {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .preset-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            background: #444;
            color: white;
        }

        .preset-btn.active {
            background: #ff4444;
        }

        .color-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-bottom: 16px;
        }

        .color-input-group {
            display: flex;
            flex-direction: column;
        }

        .color-input-group label {
            margin-bottom: 4px;
            color: #ccc;
            font-size: 12px;
        }

        .color-input-group input {
            padding: 6px;
            border: 1px solid #444;
            border-radius: 4px;
            background: #222;
            color: white;
            font-size: 12px;
        }

        /* FAQ Management */
        .faq-form {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .faq-form h3 {
            color: #ff4444;
            margin-bottom: 12px;
            font-size: 16px;
        }

        .form-row {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 12px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 4px;
            color: #ccc;
            font-size: 12px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 8px;
            border: 1px solid #444;
            border-radius: 6px;
            background: #333;
            color: white;
            font-size: 12px;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-actions {
            display: flex;
            gap: 8px;
        }

        .btn {
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #ff4444;
            color: white;
        }

        .btn-secondary {
            background: #444;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        /* Quick Questions Management */
        .quick-form {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .category-manager {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .category-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-top: 12px;
        }

        .category-item {
            background: #333;
            padding: 12px;
            border-radius: 6px;
            border-left: 3px solid #ff4444;
        }

        .category-item h4 {
            color: #ff4444;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .question-list {
            margin-top: 8px;
        }

        .question-item {
            background: #444;
            padding: 8px;
            margin-bottom: 6px;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .question-text {
            flex: 1;
            color: #ccc;
            font-size: 12px;
        }

        .question-actions {
            display: flex;
            gap: 4px;
        }

        /* User Management */
        .user-list {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .user-search {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }

        .user-search input {
            flex: 1;
            padding: 8px;
            border: 1px solid #444;
            border-radius: 6px;
            background: #333;
            color: white;
            font-size: 12px;
        }

        .user-filters {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }

        .filter-btn {
            padding: 6px 10px;
            background: #444;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .filter-btn.active {
            background: #ff4444;
        }

        .user-item {
            background: #333;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .user-item:hover {
            background: #444;
        }

        .user-item.active {
            background: #ff4444;
        }

        .user-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-name {
            font-weight: bold;
            color: #ff4444;
            font-size: 14px;
        }

        .user-phone {
            color: #ccc;
            font-size: 12px;
        }

        .user-status {
            padding: 3px 6px;
            border-radius: 3px;
            font-size: 10px;
        }

        .user-status.online {
            background: #28a745;
            color: white;
        }

        .user-status.offline {
            background: #6c757d;
            color: white;
        }

        /* User Chat */
        .user-chat {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 16px;
            height: 300px;
            display: flex;
            flex-direction: column;
        }

        .user-chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 12px;
            padding: 8px;
            background: #333;
            border-radius: 6px;
        }

        .user-chat-input {
            display: flex;
            gap: 8px;
        }

        .user-chat-input input {
            flex: 1;
            padding: 8px;
            border: 1px solid #444;
            border-radius: 6px;
            background: #333;
            color: white;
            font-size: 12px;
        }

        .user-chat-input button {
            padding: 8px 12px;
            background: #ff4444;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
        }

        /* Analytics Grid */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .analytics-card {
            background: #2a2a2a;
            padding: 16px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid #ff4444;
        }

        .analytics-number {
            font-size: 24px;
            font-weight: bold;
            color: #ff4444;
            margin-bottom: 8px;
        }

        .analytics-label {
            color: #ccc;
            font-size: 12px;
        }

        /* Chat History */
        .chat-history {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 16px;
        }

        .user-history-item {
            background: #333;
            padding: 12px;
            margin-bottom: 12px;
            border-radius: 6px;
            border-left: 3px solid #ff4444;
        }

        .user-history-item h5 {
            color: #ff4444;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .history-messages {
            font-size: 12px;
        }

        .history-message {
            background: #444;
            padding: 6px 8px;
            margin-bottom: 4px;
            border-radius: 4px;
        }

        /* Chat Messages */
        .chat-message {
            background: #333;
            padding: 8px;
            margin-bottom: 8px;
            border-radius: 6px;
        }

        .chat-message.admin-message {
            background: #ff4444;
        }

        .message-sender {
            font-weight: bold;
            color: #ff4444;
            font-size: 12px;
            margin-bottom: 4px;
        }

        .message-text {
            color: #ccc;
            font-size: 12px;
            margin-bottom: 4px;
        }

        .message-time {
            color: #666;
            font-size: 10px;
        }

        /* Back to Users Button */
        .back-to-users {
            background: #444;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            margin-bottom: 12px;
        }

        /* Back to Categories Button */
        .back-to-categories-btn {
            background: #444;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            margin-bottom: 10px;
            width: 100%;
            text-align: left;
            transition: background 0.3s;
        }

        .back-to-categories-btn:hover {
            background: #555;
        }

        .admin-sidebar {
            background: #222;
            padding: 20px 0;
            border-right: 2px solid #444;
        }

        .admin-sidebar-btn {
            background: #333;
            color: white;
            border: none;
            padding: 12px 20px;
            margin: 5px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            width: calc(100% - 30px);
            font-size: 14px;
        }

        .admin-sidebar-btn:hover {
            background: #444;
        }

        .admin-sidebar-btn.active {
            background: #ff4444;
        }

        .admin-content {
            background: #1a1a1a;
            padding: 30px;
            overflow-y: auto;
        }

        .admin-section {
            display: none;
        }

        .admin-section.active {
            display: block;
        }

        .admin-section h2 {
            color: #ff4444;
            margin-bottom: 20px;
            font-size: 24px;
        }

        /* User Management */
        .user-list {
            background: #2a2a2a;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .user-search {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .user-search input {
            flex: 1;
            padding: 10px;
            border: 1px solid #444;
            border-radius: 6px;
            background: #333;
            color: white;
        }

        .user-filters {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .filter-btn {
            padding: 8px 16px;
            background: #444;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        .filter-btn.active {
            background: #ff4444;
        }

        .user-item {
            background: #333;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .user-item:hover {
            background: #444;
        }

        .user-item.active {
            background: #ff4444;
        }

        .user-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-name {
            font-weight: bold;
            color: #ff4444;
        }

        .user-phone {
            color: #ccc;
            font-size: 14px;
        }

        .user-status {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
        }

        .user-status.online {
            background: #28a745;
            color: white;
        }

        .user-status.offline {
            background: #6c757d;
            color: white;
        }

        /* User Chat */
        .user-chat {
            background: #2a2a2a;
            border-radius: 10px;
            padding: 20px;
            height: 400px;
            display: flex;
            flex-direction: column;
        }

        .user-chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 15px;
            padding: 10px;
            background: #333;
            border-radius: 8px;
        }

        .user-chat-input {
            display: flex;
            gap: 10px;
        }

        .user-chat-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid #444;
            border-radius: 6px;
            background: #333;
            color: white;
        }

        .user-chat-input button {
            padding: 10px 20px;
            background: #ff4444;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        /* FAQ Management */
        .faq-form {
            background: #2a2a2a;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .faq-form h3 {
            color: #ff4444;
            margin-bottom: 15px;
        }

        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            flex: 1;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #ccc;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #444;
            border-radius: 6px;
            background: #333;
            color: white;
            box-sizing: border-box;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #ff4444;
            color: white;
        }

        .btn-secondary {
            background: #444;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn:hover {
            opacity: 0.8;
        }

        /* FAQ List */
        .faq-list {
            background: #2a2a2a;
            border-radius: 10px;
            padding: 20px;
        }

        .faq-item-admin {
            background: #333;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #ff4444;
        }

        .faq-item-admin h4 {
            color: #ff4444;
            margin-bottom: 10px;
        }

        .faq-item-admin p {
            color: #ccc;
            margin-bottom: 10px;
        }

        .faq-item-actions {
            display: flex;
            gap: 10px;
        }

        /* Quick Questions Management */
        .quick-form {
            background: #2a2a2a;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .category-manager {
            background: #2a2a2a;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .category-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .category-item {
            background: #333;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ff4444;
        }

        .category-item h4 {
            color: #ff4444;
            margin-bottom: 10px;
        }

        .question-list {
            margin-top: 10px;
        }

        .question-item {
            background: #444;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .question-text {
            flex: 1;
            color: #ccc;
        }

        .question-actions {
            display: flex;
            gap: 5px;
        }

        /* Theme Editor */
        .theme-editor {
            background: #2a2a2a;
            border-radius: 10px;
            padding: 20px;
        }

        .color-picker {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .color-option {
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: transform 0.3s;
        }

        .color-option:hover {
            transform: scale(1.05);
        }

        .color-option.selected {
            border: 3px solid #fff;
        }

        .color-preview {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin: 0 auto 10px;
            border: 2px solid #fff;
        }

        .advanced-theme-editor {
            background: #333;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .color-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .color-input-group {
            display: flex;
            flex-direction: column;
        }

        .color-input-group label {
            margin-bottom: 5px;
            color: #ccc;
        }

        .color-input-group input {
            padding: 8px;
            border: 1px solid #444;
            border-radius: 4px;
            background: #222;
            color: white;
        }

        .theme-presets {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .preset-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
        }

        /* Analytics */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .analytics-card {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .analytics-number {
            font-size: 32px;
            font-weight: bold;
            color: #ff4444;
            margin-bottom: 10px;
        }

        .analytics-label {
            color: #ccc;
            font-size: 14px;
        }

        .chat-history {
            background: #2a2a2a;
            border-radius: 10px;
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
        }

        .history-item {
            background: #333;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #ff4444;
        }

        .history-user {
            color: #ff4444;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .history-time {
            color: #888;
            font-size: 12px;
            margin-bottom: 10px;
        }

        .history-message {
            color: #ccc;
            font-size: 14px;
        }
            border-radius: 6px;
            color: white;
        }

        .faq-form textarea {
            min-height: 100px;
            resize: vertical;
        }

        /* User History */
        .user-history-item {
            background: #333;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #ff4444;
        }

        .user-history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .user-history-name {
            font-weight: bold;
            color: #ff4444;
        }

        .user-history-time {
            font-size: 12px;
            color: #888;
        }

        /* Theme Editor */
        .theme-editor {
            background: #333;
            padding: 15px;
            border-radius: 8px;
        }

        .color-picker {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
        }

        .color-option.active {
            border-color: white;
        }

        /* Mobile-First Responsive Design */
        @media (max-width: 768px) {
            /* Header - Mobile Optimized */
            .header {
                padding: 8px 12px;
                min-height: auto;
                position: sticky;
                top: 0;
                z-index: 100;
            }

            .header-top h2 {
                font-size: 16px;
            }

            .header-tabs {
                gap: 8px;
                width: 100%;
                justify-content: space-between;
            }

            .tab {
                padding: 10px 16px;
                font-size: 14px;
                min-width: 80px;
                flex: 1;
                text-align: center;
                border-radius: 8px;
            }

            .tab i {
                font-size: 16px;
                margin-right: 4px;
            }

            .admin-panel-btn {
                padding: 8px 12px;
                font-size: 12px;
                min-width: auto;
            }

            /* Messages Area - Mobile Optimized */
            .messages-area {
                padding: 12px;
                min-height: 120px;
                max-height: 50vh; /* More space for messages on mobile */
                overflow-y: auto;
            }

            .message {
                margin-bottom: 16px;
                gap: 8px;
            }

            .message-avatar {
                width: 36px;
                height: 36px;
                flex-shrink: 0;
            }

            .message-avatar i {
                font-size: 16px;
            }

            .message-content {
                max-width: 90%;
                font-size: 14px;
                padding: 12px 14px;
                line-height: 1.4;
            }

            .message-time {
                font-size: 11px;
                margin-top: 4px;
            }

            /* Quick Questions - Mobile Optimized */
            .quick-questions-section {
                padding: 12px;
                position: sticky;
                bottom: 0;
                background: #2a2a2a;
                border-top: 2px solid #444;
                z-index: 50;
                min-height: 100px; /* Compact height on mobile */
            }

            .quick-questions-header {
                margin-bottom: 12px;
            }

            .quick-questions-header h3 {
                font-size: 16px;
                font-weight: 600;
            }

            .quick-questions-toggle {
                padding: 8px 12px;
                font-size: 12px;
                border-radius: 6px;
            }

            .categories-container {
                grid-template-columns: repeat(2, 1fr);
                gap: 6px;
                margin-bottom: 10px;
            }

            .category-btn {
                padding: 8px 10px;
                font-size: 12px;
                border-radius: 6px;
                min-height: 36px;
                display: flex;
                align-items: center;
                justify-content: center;
                text-align: center;
            }

            .questions-container {
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .question-btn {
                padding: 10px 12px;
                font-size: 12px;
                border-radius: 6px;
                min-height: 40px;
                display: flex;
                align-items: center;
            }

            .question-btn i {
                font-size: 14px;
                margin-right: 6px;
            }

            .chat-with-us-btn {
                padding: 12px 14px;
                font-size: 13px;
                border-radius: 8px;
                margin-top: 10px;
                min-height: 40px;
            }

            /* Input Area - Mobile Optimized */
            .input-area {
                padding: 12px 16px;
                min-height: 60px;
                position: sticky;
                bottom: 0;
                background: #2a2a2a;
                border-top: 2px solid #444;
                z-index: 50;
            }

            .message-input {
                font-size: 14px;
                padding: 10px 12px;
                border-radius: 8px;
                min-height: 44px;
                max-height: 100px;
            }

            .send-btn {
                padding: 10px 14px;
                font-size: 14px;
                border-radius: 8px;
                min-width: 44px;
                min-height: 44px;
            }

            /* FAQ Section - Mobile Optimized */
            .faq-container {
                padding: 16px;
            }

            .faq-dropdown-header {
                padding: 14px 16px;
                font-size: 14px;
            }

            .faq-item {
                padding: 12px 14px;
                font-size: 14px;
            }

            .faq-question {
                font-size: 14px;
                margin-bottom: 8px;
            }

            .faq-answer {
                font-size: 13px;
                line-height: 1.4;
            }

            /* Admin Panel - Mobile Optimized */
            .admin-panel {
                flex-direction: column;
            }

            .admin-sidebar {
                width: 100%;
                height: auto;
                flex-direction: row;
                overflow-x: auto;
                padding: 12px;
            }

            .admin-sidebar-btn {
                padding: 8px 12px;
                font-size: 12px;
                white-space: nowrap;
                margin-right: 8px;
            }

            .admin-content {
                padding: 16px;
            }

            /* Registration Modal - Mobile Optimized */
            .registration-form {
                width: 95%;
                max-width: 350px;
                padding: 24px 20px;
                margin: 20px;
            }

            .registration-form h2 {
                font-size: 18px;
                margin-bottom: 16px;
            }

            .form-group {
                margin-bottom: 16px;
            }

            .form-group label {
                font-size: 14px;
                margin-bottom: 6px;
            }

            .form-group input {
                padding: 12px;
                font-size: 14px;
                border-radius: 8px;
            }

            .submit-btn {
                padding: 14px 20px;
                font-size: 16px;
                border-radius: 8px;
                width: 100%;
            }
        }

        /* Extra Small Mobile Devices */
        @media (max-width: 480px) {
            .header {
                padding: 10px 12px;
            }

            .tab {
                padding: 8px 12px;
                font-size: 13px;
                min-width: 70px;
            }

            .tab i {
                font-size: 14px;
            }

            .messages-area {
                padding: 12px;
            }

            .message-content {
                max-width: 95%;
                font-size: 13px;
                padding: 10px 12px;
            }

            .quick-questions-section {
                padding: 12px;
            }

            .categories-container {
                grid-template-columns: 1fr;
                gap: 6px;
            }

            .category-btn {
                padding: 12px 10px;
                font-size: 12px;
                min-height: 40px;
            }

            .questions-container {
                gap: 6px;
            }

            .question-btn {
                padding: 10px 12px;
                font-size: 12px;
                min-height: 44px;
            }

            .chat-with-us-btn {
                padding: 12px 14px;
                font-size: 14px;
                min-height: 44px;
            }

            .input-area {
                padding: 10px 12px;
            }

            .message-input {
                font-size: 13px;
                padding: 8px 10px;
            }

            .send-btn {
                padding: 8px 12px;
                font-size: 13px;
                min-width: 40px;
                min-height: 40px;
            }
        }

        /* Landscape Mobile */
        @media (max-width: 768px) and (orientation: landscape) {
            .header {
                min-height: 50px;
                padding: 8px 16px;
            }

            .messages-area {
                max-height: 50vh;
            }

            .quick-questions-section {
                position: relative;
            }

            .input-area {
                position: relative;
            }
        }

        /* Touch-friendly improvements */
        @media (max-width: 768px) {
            /* Ensure all clickable elements are at least 44px */
            .tab, .category-btn, .question-btn, .chat-with-us-btn, .send-btn {
                min-height: 44px;
                touch-action: manipulation;
            }

            /* Improve scrolling */
            .messages-area, .quick-questions-section {
                -webkit-overflow-scrolling: touch;
                scroll-behavior: smooth;
            }

            /* Prevent zoom on input focus */
            .message-input {
                font-size: 16px;
            }

            /* Better focus states for accessibility */
            .tab:focus, .category-btn:focus, .question-btn:focus, .send-btn:focus {
                outline: 2px solid #ff4444;
                outline-offset: 2px;
            }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #2a2a2a;
        }

        ::-webkit-scrollbar-thumb {
            background: #ff4444;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #ff6666;
        }

        /* Animation Classes */
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .slide-up {
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- Loading Screen (Hidden by default) -->
    <div id="loadingScreen" class="loading-screen" style="display: none;">
        <div class="loading-spinner"></div>
        <h2>Loading Aviator Support...</h2>
        <p>Please wait while we initialize the application</p>
    </div>

    <!-- User Registration Modal -->
    <div id="userRegistrationModal" class="user-registration-modal">
        <div class="registration-form">
            <h2><i class="fas fa-user-plus"></i> Welcome to Aviator Support</h2>
            <form id="registrationForm">
                <div class="form-group">
                    <label for="userName">Full Name</label>
                    <input type="text" id="userName" required>
                </div>
                <div class="form-group">
                    <label for="userPhone">Phone Number</label>
                    <input type="tel" id="userPhone" required>
                </div>
                <div class="form-group">
                    <label for="userPromo">Promo Code (Optional)</label>
                    <input type="text" id="userPromo">
                </div>
                <button type="submit" class="submit-btn">
                    <i class="fas fa-paper-plane"></i> Start Chat
                </button>
            </form>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="mainApp" class="main-app" style="display: none;">
        <!-- Header -->
        <div class="header">
            <div class="header-top">
                <h2 style="color: #ff4444; margin: 0;">Aviator Support</h2>
                <button id="adminPanelBtn" class="admin-panel-btn">
                    <i class="fas fa-cog"></i> Admin Panel
                </button>
            </div>
            <div class="header-tabs">
                <div class="tab active" data-tab="chat">
                    <i class="fas fa-comments"></i>
                    Chat
                </div>
                <div class="tab" data-tab="faq">
                    <i class="fas fa-question-circle"></i>
                    FAQ
                </div>
            </div>
        </div>

        <!-- Chat Tab Section -->
        <div id="chatTabSection" class="chat-container">
            <!-- Messages Area -->
            <div id="messagesArea" class="messages-area">
                <!-- Messages will be added here -->
            </div>

            <!-- Quick Questions Section -->
            <div id="quickQuestionsSection" class="quick-questions-section">
                <div class="quick-questions-header">
                    <h3>Quick Questions</h3>
                    <button id="quickQuestionsToggle" class="quick-questions-toggle" onclick="toggleQuickQuestions()">
                        <i class="fas fa-chevron-up"></i> Hide
                    </button>
                </div>
                <div id="categoriesContainer" class="categories-container">
                    <!-- Categories will be loaded here -->
                </div>
                <div id="questionsContainer" class="questions-container">
                    <!-- Questions will be loaded here -->
                </div>
            </div>

            <!-- Input Area -->
            <div id="chatInputArea" class="input-area" style="display: none;">
                <textarea id="messageInput" class="message-input" placeholder="Type your message..." rows="1"></textarea>
                <button id="sendBtn" class="send-btn" onclick="sendMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>

        <!-- FAQ Tab Section -->
        <div id="faqTabSection" class="faq-container" style="display: none;">
            <div class="messages-area">
                <div id="faqContainer" class="faq-container">
                    <!-- FAQ content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel - Mobile Optimized -->
    <div id="adminPanel" class="admin-panel">
        <div class="admin-sidebar">
            <button class="admin-sidebar-btn active" data-section="users">Users</button>
            <button class="admin-sidebar-btn" data-section="theme">Theme</button>
            <button class="admin-sidebar-btn" data-section="faq">FAQ</button>
            <button class="admin-sidebar-btn" data-section="quick">Quick Q</button>
            <button class="admin-sidebar-btn" data-section="analytics">Analytics</button>
            <button id="closeAdminBtn" class="admin-sidebar-btn" style="background:#ff4444;color:#fff;">Close</button>
        </div>
        <div class="admin-content">
            <!-- Users Section -->
            <div id="adminSectionUsers" class="admin-section active">
                <h2>User Management</h2>
                <div class="user-list">
                    <div class="user-search">
                        <input type="text" placeholder="Search users..." id="userSearchInput">
                    </div>
                    <div class="user-filters">
                        <button class="filter-btn active" data-filter="all">All</button>
                        <button class="filter-btn" data-filter="online">Online</button>
                        <button class="filter-btn" data-filter="offline">Offline</button>
                    </div>
                    <div id="userListContainer"></div>
                </div>
                <div id="userChatContainer" class="user-chat" style="display:none;">
                    <button class="back-to-users" onclick="backToUsers()">â† Back to Users</button>
                    <h3>Chat with <span id="selectedUserName"></span></h3>
                    <div id="userChatMessages" class="user-chat-messages"></div>
                    <div class="user-chat-input">
                        <input type="text" placeholder="Type message..." id="userChatInput">
                        <button onclick="sendUserMessage()">Send</button>
                    </div>
                </div>
            </div>

            <!-- Theme Section -->
            <div id="adminSectionTheme" class="admin-section">
                <h2>Theme Editor</h2>
                <div class="theme-editor">
                    <h3>Theme Presets</h3>
                    <div class="theme-presets">
                        <button class="preset-btn active" data-theme="dark">Dark</button>
                        <button class="preset-btn" data-theme="light">Light</button>
                        <button class="preset-btn" data-theme="blue">Blue</button>
                        <button class="preset-btn" data-theme="green">Green</button>
                        <button class="preset-btn" data-theme="purple">Purple</button>
                    </div>
                    <h3>Custom Colors</h3>
                    <div class="color-inputs">
                        <div class="color-input-group">
                            <label>Primary Color</label>
                            <input type="color" id="primaryColor" value="#ff4444">
                        </div>
                        <div class="color-input-group">
                            <label>Secondary Color</label>
                            <input type="color" id="secondaryColor" value="#444444">
                        </div>
                        <div class="color-input-group">
                            <label>Background Color</label>
                            <input type="color" id="backgroundColor" value="#1a1a1a">
                        </div>
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-primary" onclick="saveTheme()">Save Theme</button>
                        <button class="btn btn-secondary" onclick="resetTheme()">Reset</button>
                    </div>
                </div>
            </div>

            <!-- FAQ Section -->
            <div id="adminSectionFAQ" class="admin-section">
                <h2>FAQ Management</h2>
                <div class="faq-form">
                    <h3>Add New FAQ</h3>
                    <form id="faqForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Category</label>
                                <select id="faqCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="Game Rules">Game Rules</option>
                                    <option value="Deposits">Deposits</option>
                                    <option value="Withdrawals">Withdrawals</option>
                                    <option value="Account">Account</option>
                                    <option value="Technical">Technical</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Question</label>
                                <input type="text" id="faqQuestion" placeholder="Enter question..." required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Answer</label>
                                <textarea id="faqAnswer" placeholder="Enter answer..." required></textarea>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Add FAQ</button>
                            <button type="button" class="btn btn-secondary" onclick="clearFaqForm()">Clear</button>
                        </div>
                    </form>
                </div>
                <div id="faqList" class="faq-list"></div>
            </div>

            <!-- Quick Questions Section -->
            <div id="adminSectionQuick" class="admin-section">
                <h2>Quick Questions Management</h2>
                <div class="quick-form">
                    <h3>Add Quick Question</h3>
                    <form id="quickQuestionForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Category</label>
                                <select id="quickCategory" required>
                                    <option value="">Select or Create Category</option>
                                    <option value="Deposits">Deposits</option>
                                    <option value="Withdrawals">Withdrawals</option>
                                    <option value="Game">Game</option>
                                    <option value="Account">Account</option>
                                    <option value="Technical">Technical</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Question</label>
                                <input type="text" id="quickQuestion" placeholder="Enter question..." required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Response</label>
                                <textarea id="quickResponse" placeholder="Enter response..." required></textarea>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Icon</label>
                                <select id="quickIcon" required>
                                    <option value="fas fa-question-circle">Question</option>
                                    <option value="fas fa-money-bill-wave">Money</option>
                                    <option value="fas fa-credit-card">Card</option>
                                    <option value="fas fa-gamepad">Game</option>
                                    <option value="fas fa-user">User</option>
                                    <option value="fas fa-cog">Settings</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Add Question</button>
                            <button type="button" class="btn btn-secondary" onclick="clearQuickForm()">Clear</button>
                        </div>
                    </form>
                </div>
                <div id="categoryManager" class="category-manager">
                    <h3>Category Manager</h3>
                    <div id="categoryList" class="category-list"></div>
                </div>
            </div>

            <!-- Analytics Section -->
            <div id="adminSectionAnalytics" class="admin-section">
                <h2>Analytics</h2>
                <div class="analytics-grid">
                    <div class="analytics-card">
                        <div class="analytics-number" id="totalUsers">0</div>
                        <div class="analytics-label">Total Users</div>
                    </div>
                    <div class="analytics-card">
                        <div class="analytics-number" id="activeUsers">0</div>
                        <div class="analytics-label">Active Users</div>
                    </div>
                    <div class="analytics-card">
                        <div class="analytics-number" id="totalMessages">0</div>
                        <div class="analytics-label">Total Messages</div>
                    </div>
                    <div class="analytics-card">
                        <div class="analytics-number" id="totalFAQs">0</div>
                        <div class="analytics-label">Total FAQs</div>
                    </div>
                </div>
                <div class="chat-history">
                    <h3>Recent Chat History</h3>
                    <div id="chatHistoryContainer"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- FAQ/Quick Question Category Dropdown Template (hidden, for JS cloning) -->
    <select id="categoryDropdownTemplate" style="display:none;"></select>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-storage-compat.js"></script>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAL5e-5eQfgf1nI6hWTnhwLFgK0Cp89aa0",
            authDomain: "aviator-pr01.firebaseapp.com",
            databaseURL: "https://aviator-pr01-default-rtdb.firebaseio.com",
            projectId: "aviator-pr01",
            storageBucket: "aviator-pr01.firebasestorage.app",
            messagingSenderId: "290788041297",
            appId: "1:290788041297:web:168f99f1532997fb778e70",
            measurementId: "G-ENCBTT4BL8"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const database = firebase.database();

        // Global variables
        let currentUser = null;
        let isAdmin = false;
        let currentChatId = null;
        let selectedCategory = null;
        let primaryColor = '#ff4444';

        // Admin credentials
        const ADMIN_EMAIL = 'admin@aviator.com';
        const ADMIN_PASSWORD = 'aviator2025adminmaan';

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM Content Loaded - Starting app initialization');
            
            try {
                // Hide loading screen immediately
                hideLoadingScreen();
                
                // Setup event listeners
                setupEventListeners();
                
                // Initialize default data if missing
                initializeDefaultData();
                
                // Check user session and start app
                checkUserSession();
                
            } catch (error) {
                console.error('Error during initialization:', error);
                hideLoadingScreen();
                showUserRegistration();
            }
        });

        function setupEventListeners() {
            try {
                // Registration form
                const registrationForm = document.getElementById('registrationForm');
                if (registrationForm) {
                    registrationForm.addEventListener('submit', handleUserRegistration);
                }
                
                // Message sending
                const sendBtn = document.getElementById('sendBtn');
                const messageInput = document.getElementById('messageInput');
                
                if (sendBtn) {
                    sendBtn.addEventListener('click', sendMessage);
                }
                
                if (messageInput) {
                    messageInput.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter' && !e.shiftKey) {
                            e.preventDefault();
                            sendMessage();
                        }
                    });
                    
                    // Auto-resize textarea
                    messageInput.addEventListener('input', function() {
                        this.style.height = 'auto';
                        this.style.height = Math.min(this.scrollHeight, 120) + 'px';
                    });
                }

                // Tab switching
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.addEventListener('click', function() {
                        switchTab(this.dataset.tab);
                    });
                });

                // Quick questions
                const quickQuestionsToggle = document.getElementById('quickQuestionsToggle');
                if (quickQuestionsToggle) {
                    quickQuestionsToggle.addEventListener('click', toggleQuickQuestions);
                }
                
                // Admin panel
                const adminPanelBtn = document.getElementById('adminPanelBtn');
                const closeAdminBtn = document.getElementById('closeAdminBtn');
                
                if (adminPanelBtn) {
                    adminPanelBtn.addEventListener('click', showAdminPanel);
                }
                
                if (closeAdminBtn) {
                    closeAdminBtn.addEventListener('click', hideAdminPanel);
                }

                // Mobile-specific improvements
                if (window.innerWidth <= 768) {
                    // Prevent zoom on input focus
                    if (messageInput) {
                        messageInput.addEventListener('focus', function() {
                            this.style.fontSize = '16px';
                        });
                        
                        messageInput.addEventListener('blur', function() {
                            this.style.fontSize = '';
                        });
                    }
                    
                    // Touch feedback for buttons
                    document.querySelectorAll('button').forEach(btn => {
                        btn.addEventListener('touchstart', function() {
                            this.style.transform = 'scale(0.95)';
                        });
                        
                        btn.addEventListener('touchend', function() {
                            this.style.transform = 'scale(1)';
                        });
                    });
                    
                    // Smooth scrolling
                    document.querySelectorAll('.messages-area, .user-chat-messages').forEach(el => {
                        el.style.webkitOverflowScrolling = 'touch';
                    });
                }
                
            } catch (error) {
                console.error('Error setting up event listeners:', error);
            }
        }
            // Prevent zoom on input focus
            messageInput.addEventListener('focus', function() {
                this.style.fontSize = '16px';
            });
            
            messageInput.addEventListener('blur', function() {
                this.style.fontSize = '14px';
            });

            // Add touch feedback for buttons
            document.querySelectorAll('.category-btn, .question-btn, .chat-with-us-btn, .send-btn').forEach(btn => {
                btn.addEventListener('touchstart', function() {
                    this.style.transform = 'scale(0.95)';
                });
                
                btn.addEventListener('touchend', function() {
                    this.style.transform = 'scale(1)';
                });
            });

            // Improve scrolling for mobile
            document.querySelectorAll('.messages-area, .quick-questions-section').forEach(container => {
                container.style.webkitOverflowScrolling = 'touch';
            });
        }

            // Close icon dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.icon-selector')) {
                    document.getElementById('iconDropdown').classList.remove('active');
                }
            });
        }

        function checkUserSession() {
            try {
                console.log('Checking user session...');
                const userData = localStorage.getItem('aviatorUser');
                if (userData) {
                    currentUser = JSON.parse(userData);
                    console.log('User found:', currentUser);
                    hideLoadingScreen();
                    showMainApp();
                    loadChat();
                    checkAdminStatus();
                } else {
                    console.log('No user found, showing registration');
                    hideLoadingScreen();
                    showUserRegistration();
                }
            } catch (e) {
                console.error('Error checking user session:', e);
                hideLoadingScreen();
                showUserRegistration();
            }
        }

        function showUserRegistration() {
            console.log('Showing user registration modal');
            const modal = document.getElementById('userRegistrationModal');
            if (modal) {
                modal.style.display = 'flex';
                console.log('User registration modal displayed');
            } else {
                console.error('User registration modal not found');
            }
        }

        function handleUserRegistration(e) {
            e.preventDefault();
            console.log('User registration form submitted');
            
            const userName = document.getElementById('userName').value;
            const userPhone = document.getElementById('userPhone').value;
            const userPromo = document.getElementById('userPromo').value;

            console.log('Form data:', { userName, userPhone, userPromo });

            if (!userName || !userPhone) {
                alert('Please fill in all required fields');
                return;
            }

            // Create user data
            const userData = {
                id: Date.now().toString(),
                name: userName,
                phone: userPhone,
                promo: userPromo,
                timestamp: Date.now()
            };

            console.log('Created user data:', userData);

            try {
                // Save to localStorage
                localStorage.setItem('aviatorUser', JSON.stringify(userData));
                currentUser = userData;

                // Save to Firebase
                database.ref('users/' + userData.id).set(userData)
                    .then(() => {
                        console.log('User saved to Firebase successfully');
                        // Hide registration and show app
                        document.getElementById('userRegistrationModal').style.display = 'none';
                        showMainApp();
                        loadChat();
                        checkAdminStatus();
                    })
                    .catch(error => {
                        console.error('Error saving to Firebase:', error);
                        // Still show app even if Firebase fails
                        document.getElementById('userRegistrationModal').style.display = 'none';
                        showMainApp();
                        loadChat();
                        checkAdminStatus();
                    });
            } catch (error) {
                console.error('Error in user registration:', error);
                alert('Error during registration. Please try again.');
            }
        }

        function showMainApp() {
            document.getElementById('mainApp').style.display = 'flex';
            // Ensure initial state shows chat tab
            document.getElementById('chatTabSection').style.display = 'flex';
            document.getElementById('faqTabSection').style.display = 'none';
            
            // Show Quick Questions section by default
            document.getElementById('quickQuestionsSection').style.display = 'block';
            // Hide chat input by default
            document.getElementById('chatInputArea').style.display = 'none';
            
            // Load data after ensuring UI is ready
            setTimeout(() => {
                loadQuickQuestions();
                sendWelcomeMessage();
            }, 100);
        }

        function sendWelcomeMessage() {
            const welcomeMessage = {
                id: Date.now().toString(),
                text: "Welcome to Aviator Game Support! ðŸŽ®\n\nI'm here to help you with any questions about the game. You can:\n\n1ï¸âƒ£ Use the Quick Questions below for instant answers\n2ï¸âƒ£ Type your message directly for personalized support\n3ï¸âƒ£ Check the FAQ section for common questions\n\nðŸ’¡ Tip: Use the Quick Questions for faster responses!",
                sender: 'admin',
                timestamp: Date.now()
            };

            addMessageToUI(welcomeMessage);
            saveMessageToFirebase(welcomeMessage);
        }

        function switchTab(tabName) {
            // Update tab styling
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

            // Show/hide sections properly
            const chatSection = document.getElementById('chatTabSection');
            const faqSection = document.getElementById('faqTabSection');
            
            if (tabName === 'chat') {
                chatSection.style.display = 'flex';
                faqSection.style.display = 'none';
                // Ensure chat content is visible
                document.getElementById('messagesArea').style.display = 'block';
                document.getElementById('quickQuestionsSection').style.display = 'block';
                loadQuickQuestions();
            } else if (tabName === 'faq') {
                chatSection.style.display = 'none';
                faqSection.style.display = 'flex';
                loadFAQSection();
            }
        }



        function toggleQuickQuestions() {
            const section = document.getElementById('quickQuestionsSection');
            const toggle = document.getElementById('quickQuestionsToggle');
            const categoriesContainer = document.getElementById('categoriesContainer');
            const questionsContainer = document.getElementById('questionsContainer');
            
            if (section.style.display === 'none' || !section.style.display) {
                // Show full section
                section.style.display = 'block';
                categoriesContainer.style.display = 'grid';
                questionsContainer.style.display = 'none';
                toggle.innerHTML = '<i class="fas fa-chevron-up"></i> Hide';
                
                // Scroll to quick questions on mobile
                if (window.innerWidth <= 768) {
                    setTimeout(() => {
                        section.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }, 100);
                }
            } else {
                // Collapse but keep visible
                section.style.display = 'block';
                categoriesContainer.style.display = 'none';
                questionsContainer.style.display = 'none';
                toggle.innerHTML = '<i class="fas fa-chevron-down"></i> Show Quick Questions';
            }
        }

        function loadQuickQuestions() {
            database.ref('quickQuestions').once('value')
                .then(snapshot => {
                    const data = snapshot.val() || {};
                    displayCategories(Object.keys(data));
                })
                .catch(error => {
                    console.error('Error loading quick questions:', error);
                    // Fallback: show default categories if Firebase fails
                    displayCategories(['Deposits', 'Withdrawals', 'Game', 'Account', 'Technical']);
                });
        }

        function displayCategories(categories) {
            const container = document.getElementById('categoriesContainer');
            container.innerHTML = '';

            categories.forEach(category => {
                const btn = document.createElement('button');
                btn.className = 'category-btn';
                btn.textContent = category;
                btn.onclick = () => selectCategory(category);
                container.appendChild(btn);
            });

            // Add "Chat with Us" button at the end
            const chatWithUsBtn = document.createElement('button');
            chatWithUsBtn.className = 'chat-with-us-btn';
            chatWithUsBtn.innerHTML = '<i class="fas fa-comments"></i> Chat with Us';
            chatWithUsBtn.onclick = () => showChatInput();
            container.appendChild(chatWithUsBtn);
        }

        function selectCategory(category) {
            selectedCategory = category;
            
            // Update active category
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // Hide categories and show questions
            document.getElementById('categoriesContainer').style.display = 'none';
            document.getElementById('questionsContainer').style.display = 'grid';
            
            // Add back button to questions container
            const questionsContainer = document.getElementById('questionsContainer');
            const backBtn = document.createElement('button');
            backBtn.className = 'back-to-categories-btn';
            backBtn.innerHTML = '<i class="fas fa-arrow-left"></i> Back to Categories';
            backBtn.onclick = showCategories;
            backBtn.style.cssText = `
                background: #444;
                color: white;
                border: none;
                padding: 8px 12px;
                border-radius: 6px;
                cursor: pointer;
                font-size: 12px;
                margin-bottom: 10px;
                width: 100%;
                text-align: left;
            `;
            
            // Clear container and add back button
            questionsContainer.innerHTML = '';
            questionsContainer.appendChild(backBtn);

            // Load questions for this category
            database.ref(`quickQuestions/${category}`).once('value')
                .then(snapshot => {
                    const questions = snapshot.val() || {};
                    displayQuestions(questions);
                    
                    // On mobile, scroll to questions
                    if (window.innerWidth <= 768) {
                        setTimeout(() => {
                            questionsContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                        }, 300);
                    }
                });
        }

        function showCategories() {
            // Show categories and hide questions
            document.getElementById('categoriesContainer').style.display = 'grid';
            document.getElementById('questionsContainer').style.display = 'none';
            
            // Clear questions container
            document.getElementById('questionsContainer').innerHTML = '';
        }

        function displayQuestions(questions) {
            const container = document.getElementById('questionsContainer');
            
            // Keep the back button that was added in selectCategory
            const backBtn = container.querySelector('.back-to-categories-btn');
            container.innerHTML = '';
            if (backBtn) {
                container.appendChild(backBtn);
            }

            Object.keys(questions).forEach(questionId => {
                const question = questions[questionId];
                const btn = document.createElement('button');
                btn.className = 'question-btn';
                btn.innerHTML = `
                    <i class="${question.icon}"></i>
                    <span>${question.question}</span>
                `;
                btn.onclick = () => sendQuickResponse(question.question, question.response);
                container.appendChild(btn);
            });
        }

        function sendQuickResponse(question, response) {
            // Add user message with the actual question text
            const userMessage = {
                id: Date.now().toString(),
                text: question,
                sender: 'user',
                timestamp: Date.now()
            };
            addMessageToUI(userMessage);
            saveMessageToFirebase(userMessage);

            // Save to chatHistory for user history tracking
            if (currentUser) {
                const historyData = {
                    userId: currentUser.id,
                    userName: currentUser.name,
                    userPhone: currentUser.phone,
                    message: question,
                    response: response,
                    timestamp: new Date().toISOString(),
                    type: 'quick_question'
                };
                database.ref('chatHistory').push(historyData);
            }

            // Add admin response
            setTimeout(() => {
                const adminMessage = {
                    id: (Date.now() + 1).toString(),
                    text: response,
                    sender: 'admin',
                    timestamp: Date.now()
                };
                addMessageToUI(adminMessage);
                saveMessageToFirebase(adminMessage);
            }, 500);

            // Return to categories view after sending response
            showCategories();
            collapseQuickQuestions();
        }

        function showChatInput() {
            // Show chat input
            document.getElementById('chatInputArea').style.display = 'flex';
            // Collapse quick questions but keep section visible
            const quickQuestionsSection = document.getElementById('quickQuestionsSection');
            quickQuestionsSection.style.display = 'block';
            collapseQuickQuestions();
            
            // Focus on input
            setTimeout(() => {
                document.getElementById('messageInput').focus();
            }, 100);
        }

        function collapseQuickQuestions() {
            const section = document.getElementById('quickQuestionsSection');
            const toggle = document.getElementById('quickQuestionsToggle');
            const content = section.querySelector('.categories-container');
            const questionsContainer = document.getElementById('questionsContainer');
            
            // Hide questions and show categories collapsed
            questionsContainer.style.display = 'none';
            content.style.display = 'grid';
            content.classList.remove('quick-questions-expanded');
            content.classList.add('quick-questions-collapsed');
            toggle.innerHTML = '<i class="fas fa-chevron-down"></i> Show More';
            section.style.display = 'block';
        }

        function expandQuickQuestions() {
            const section = document.getElementById('quickQuestionsSection');
            const toggle = document.getElementById('quickQuestionsToggle');
            const content = section.querySelector('.categories-container');
            const questionsContainer = document.getElementById('questionsContainer');
            
            // Show categories expanded
            questionsContainer.style.display = 'none';
            content.style.display = 'grid';
            content.classList.remove('quick-questions-collapsed');
            content.classList.add('quick-questions-expanded');
            toggle.innerHTML = '<i class="fas fa-chevron-up"></i> Show Less';
            section.style.display = 'block';
        }

        function toggleQuickQuestions() {
            const section = document.getElementById('quickQuestionsSection');
            const toggle = document.getElementById('quickQuestionsToggle');
            const content = section.querySelector('.categories-container');
            
            if (content.classList.contains('quick-questions-collapsed')) {
                expandQuickQuestions();
            } else {
                collapseQuickQuestions();
            }
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const text = input.value.trim();

            if (!text) return;

            // Check for admin access code
            if (text.toLowerCase() === 'aviator2025adminmaan') {
                const message = {
                    id: Date.now().toString(),
                    text: text,
                    sender: 'user',
                    timestamp: Date.now()
                };
                addMessageToUI(message);
                saveMessageToFirebase(message);
                input.value = '';
                input.style.height = 'auto';

                // Auto-open admin panel
                setTimeout(() => {
                    const adminResponse = {
                        id: (Date.now() + 1).toString(),
                        text: "ðŸ” Admin access granted! Opening admin panel...",
                        sender: 'admin',
                        timestamp: Date.now()
                    };
                    addMessageToUI(adminResponse);
                    saveMessageToFirebase(adminResponse);
                    
                    // Open admin panel
                    isAdmin = true;
                    document.getElementById('adminPanelBtn').style.display = 'block';
                    showAdminPanel();
                }, 500);
                return;
            }

            const message = {
                id: Date.now().toString(),
                text: text,
                sender: 'user',
                timestamp: Date.now()
            };

            addMessageToUI(message);
            saveMessageToFirebase(message);
            input.value = '';
            input.style.height = 'auto';

            // Hide chat input after sending
            document.getElementById('chatInputArea').style.display = 'none';

            // Ensure quick questions stay visible (collapsed)
            const quickQuestionsSection = document.getElementById('quickQuestionsSection');
            quickQuestionsSection.style.display = 'block';
            collapseQuickQuestions();

            // Simulate admin response
            setTimeout(() => {
                const adminResponse = {
                    id: (Date.now() + 1).toString(),
                    text: "Thank you for your message. Our support team will get back to you soon.",
                    sender: 'admin',
                    timestamp: Date.now()
                };
                addMessageToUI(adminResponse);
                saveMessageToFirebase(adminResponse);
            }, 1000);
        }

        function addMessageToUI(message) {
            const messagesArea = document.getElementById('messagesArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${message.sender === 'user' ? 'user' : ''} fade-in`;

            const avatar = message.sender === 'user' ? 'fas fa-user' : 'fas fa-headset';
            const time = new Date(message.timestamp).toLocaleTimeString();

            messageDiv.innerHTML = `
                <div class="message-avatar">
                    <i class="${avatar}"></i>
                </div>
                <div class="message-content">
                    <div>${message.text}</div>
                    <div class="message-time">${time}</div>
                </div>
            `;

            messagesArea.appendChild(messageDiv);
            messagesArea.scrollTop = messagesArea.scrollHeight;
        }

        function saveMessageToFirebase(message) {
            if (!currentUser) return;

            const chatRef = database.ref(`chats/${currentUser.id}/messages/${message.id}`);
            chatRef.set(message);

            // Also save to chatHistory for user history tracking
            if (message.sender === 'user') {
                const historyData = {
                    userId: currentUser.id,
                    userName: currentUser.name,
                    userPhone: currentUser.phone,
                    message: message.text,
                    timestamp: new Date(message.timestamp).toISOString(),
                    type: 'chat_message'
                };
                database.ref('chatHistory').push(historyData);
            }
        }

        function loadChat() {
            if (!currentUser) return;

            // Load chat messages
            database.ref(`chats/${currentUser.id}/messages`).once('value')
                .then(snapshot => {
                    const messages = snapshot.val() || {};
                    const messagesArea = document.getElementById('messagesArea');
                    messagesArea.innerHTML = '';

                    Object.keys(messages).forEach(messageId => {
                        addMessageToUI(messages[messageId]);
                    });
                });

            // Load user history from chatHistory
            database.ref('chatHistory').orderByChild('userId').equalTo(currentUser.id).once('value')
                .then(snapshot => {
                    const history = snapshot.val() || {};
                    const messagesArea = document.getElementById('messagesArea');
                    
                    // If no existing messages, load history
                    if (messagesArea.children.length === 0) {
                        Object.keys(history).forEach(historyId => {
                            const historyItem = history[historyId];
                            const userMessage = {
                                id: historyId + '_user',
                                text: historyItem.message,
                                sender: 'user',
                                timestamp: new Date(historyItem.timestamp).getTime()
                            };
                            const botMessage = {
                                id: historyId + '_bot',
                                text: historyItem.response,
                                sender: 'admin',
                                timestamp: new Date(historyItem.timestamp).getTime() + 1000
                            };
                            addMessageToUI(userMessage);
                            addMessageToUI(botMessage);
                        });
                    }
                });
        }

        function checkAdminStatus() {
            // Check if user is admin (you can implement your own logic)
            if (currentUser && currentUser.name.toLowerCase().includes('admin')) {
                isAdmin = true;
                document.getElementById('adminPanelBtn').style.display = 'block';
            }
        }

        function showAdminPanel() {
            if (!isAdmin) {
                // Try to authenticate as admin
                auth.signInWithEmailAndPassword(ADMIN_EMAIL, ADMIN_PASSWORD)
                    .then(() => {
                        isAdmin = true;
                        document.getElementById('adminPanelBtn').style.display = 'block';
                        document.getElementById('adminPanel').style.display = 'flex';
                        loadAdminData();
                    })
                    .catch(error => {
                        alert('Admin access denied');
                    });
            } else {
                document.getElementById('adminPanel').style.display = 'flex';
                loadAdminData();
            }
        }

        function hideAdminPanel() {
            document.getElementById('adminPanel').style.display = 'none';
        }

        function loadAdminData() {
            loadFAQList();
            loadQuickMessagesList();
            loadUserHistory();
            loadUserChatList();
            loadAnalytics();
            setupAdminEventListeners();
        }

        function addFAQ(e) {
            e.preventDefault();
            
            const category = document.getElementById('faqCategory').value;
            const question = document.getElementById('faqQuestion').value;
            const answer = document.getElementById('faqAnswer').value;

            const faqData = {
                id: Date.now().toString(),
                category: category,
                question: question,
                answer: answer,
                timestamp: Date.now()
            };

            database.ref(`faqs/${faqData.id}`).set(faqData)
                .then(() => {
                    alert('FAQ added successfully!');
                    document.getElementById('faqForm').reset();
                    loadFAQList();
                })
                .catch(error => {
                    alert('Error adding FAQ: ' + error.message);
                });
        }

        function loadFAQList() {
            database.ref('faqs').once('value')
                .then(snapshot => {
                    const faqs = snapshot.val() || {};
                    const container = document.getElementById('faqList');
                    
                    container.innerHTML = '<h4>Existing FAQs</h4>';
                    
                    Object.keys(faqs).forEach(faqId => {
                        const faq = faqs[faqId];
                        const faqDiv = document.createElement('div');
                        faqDiv.className = 'admin-card';
                        faqDiv.innerHTML = `
                            <h5>${faq.question}</h5>
                            <p><strong>Category:</strong> ${faq.category}</p>
                            <p><strong>Answer:</strong> ${faq.answer}</p>
                            <button class="admin-btn" onclick="deleteFAQ('${faqId}')">Delete</button>
                        `;
                        container.appendChild(faqDiv);
                    });
                });
        }

        function deleteFAQ(faqId) {
            if (confirm('Are you sure you want to delete this FAQ?')) {
                database.ref(`faqs/${faqId}`).remove()
                    .then(() => {
                        loadFAQList();
                    });
            }
        }

        function addQuickMessage(e) {
            e.preventDefault();
            
            const category = document.getElementById('quickCategory').value;
            const question = document.getElementById('quickQuestion').value;
            const response = document.getElementById('quickResponse').value;
            const icon = document.getElementById('quickIcon').value;

            const quickMessageData = {
                id: Date.now().toString(),
                category: category,
                question: question,
                response: response,
                icon: icon,
                timestamp: Date.now()
            };

            database.ref(`quickMessages/${category}/${quickMessageData.id}`).set(quickMessageData)
                .then(() => {
                    alert('Quick message added successfully!');
                    document.getElementById('quickMessageForm').reset();
                    loadQuickMessagesList();
                })
                .catch(error => {
                    alert('Error adding quick message: ' + error.message);
                });
        }

        function loadQuickMessagesList() {
            database.ref('quickMessages').once('value')
                .then(snapshot => {
                    const quickMessages = snapshot.val() || {};
                    const container = document.getElementById('quickMessagesList');
                    
                    container.innerHTML = '<h4>Existing Quick Messages</h4>';
                    
                    Object.keys(quickMessages).forEach(category => {
                        const categoryDiv = document.createElement('div');
                        categoryDiv.className = 'admin-card';
                        categoryDiv.innerHTML = `<h5>Category: ${category}</h5>`;
                        
                        Object.keys(quickMessages[category]).forEach(messageId => {
                            const message = quickMessages[category][messageId];
                            const messageDiv = document.createElement('div');
                            messageDiv.innerHTML = `
                                <p><i class="${message.icon}"></i> ${message.question}</p>
                                <p><strong>Response:</strong> ${message.response}</p>
                                <button class="admin-btn" onclick="deleteQuickMessage('${category}', '${messageId}')">Delete</button>
                            `;
                            categoryDiv.appendChild(messageDiv);
                        });
                        
                        container.appendChild(categoryDiv);
                    });
                });
        }

        function deleteQuickMessage(category, messageId) {
            if (confirm('Are you sure you want to delete this quick message?')) {
                database.ref(`quickMessages/${category}/${messageId}`).remove()
                    .then(() => {
                        loadQuickMessagesList();
                    });
            }
        }

        function loadUserHistory() {
            database.ref('users').once('value')
                .then(snapshot => {
                    const users = snapshot.val() || {};
                    const container = document.getElementById('userHistoryList');
                    
                    container.innerHTML = '<h4>User History</h4>';
                    
                    Object.keys(users).forEach(userId => {
                        const user = users[userId];
                        const userDiv = document.createElement('div');
                        userDiv.className = 'user-history-item';
                        userDiv.innerHTML = `
                            <div class="user-history-header">
                                <span class="user-history-name">${user.name}</span>
                                <span class="user-history-time">${new Date(user.timestamp).toLocaleString()}</span>
                            </div>
                            <p><strong>Phone:</strong> ${user.phone}</p>
                            <p><strong>Promo:</strong> ${user.promo || 'None'}</p>
                            <button class="admin-btn" onclick="deleteUser('${userId}')">Delete</button>
                        `;
                        container.appendChild(userDiv);
                    });
                });
        }

        function deleteUser(userId) {
            if (confirm('Are you sure you want to delete this user?')) {
                database.ref(`users/${userId}`).remove()
                    .then(() => {
                        loadUserHistory();
                    });
            }
        }

        function selectColor(color) {
            primaryColor = color;
            
            // Update active color
            document.querySelectorAll('.color-option').forEach(option => {
                option.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function saveTheme() {
            // Update CSS variables
            document.documentElement.style.setProperty('--primary-color', primaryColor);
            
            // Save to Firebase
            database.ref('theme/primaryColor').set(primaryColor)
                .then(() => {
                    alert('Theme saved successfully!');
                })
                .catch(error => {
                    alert('Error saving theme: ' + error.message);
                });
        }

        function loadFAQSection() {
            database.ref('faqs').once('value')
                .then(snapshot => {
                    const faqs = snapshot.val() || {};
                    const container = document.getElementById('faqContainer');
                    
                    container.innerHTML = '<h2 style="text-align: center; margin-bottom: 20px; color: #ff4444;">Frequently Asked Questions</h2>';
                    
                    // Group FAQs by category
                    const categories = {};
                    Object.keys(faqs).forEach(faqId => {
                        const faq = faqs[faqId];
                        if (!categories[faq.category]) {
                            categories[faq.category] = [];
                        }
                        categories[faq.category].push(faq);
                    });
                    
                    // Create dropdown for each category
                    Object.keys(categories).forEach(category => {
                        const categoryDiv = document.createElement('div');
                        categoryDiv.className = 'faq-dropdown';
                        
                        const header = document.createElement('div');
                        header.className = 'faq-dropdown-header';
                        header.innerHTML = `
                            <span><i class="fas fa-folder"></i> ${category}</span>
                            <i class="fas fa-chevron-down"></i>
                        `;
                        
                        const content = document.createElement('div');
                        content.className = 'faq-dropdown-content';
                        
                        categories[category].forEach(faq => {
                            const faqItem = document.createElement('div');
                            faqItem.className = 'faq-item';
                            faqItem.innerHTML = `
                                <div class="faq-question" onclick="toggleFAQAnswer(this)">
                                    <i class="fas fa-question-circle"></i> ${faq.question}
                                </div>
                                <div class="faq-answer">
                                    ${faq.answer}
                                </div>
                            `;
                            content.appendChild(faqItem);
                        });
                        
                        header.addEventListener('click', function() {
                            content.classList.toggle('active');
                            const icon = this.querySelector('.fa-chevron-down');
                            icon.style.transform = content.classList.contains('active') ? 'rotate(180deg)' : 'rotate(0deg)';
                        });
                        
                        categoryDiv.appendChild(header);
                        categoryDiv.appendChild(content);
                        container.appendChild(categoryDiv);
                    });
                });
        }

        function toggleFAQAnswer(element) {
            const answer = element.nextElementSibling;
            answer.classList.toggle('active');
        }

        // Icon selector functions
        function toggleIconDropdown() {
            const dropdown = document.getElementById('iconDropdown');
            dropdown.classList.toggle('active');
            
            if (dropdown.classList.contains('active')) {
                loadIcons();
            }
        }

        function loadIcons() {
            const dropdown = document.getElementById('iconDropdown');
            const icons = [
                'fas fa-gamepad', 'fas fa-dice', 'fas fa-coins', 'fas fa-money-bill-wave',
                'fas fa-credit-card', 'fas fa-university', 'fas fa-mobile-alt', 'fas fa-laptop',
                'fas fa-wifi', 'fas fa-signal', 'fas fa-exclamation-triangle', 'fas fa-check-circle',
                'fas fa-times-circle', 'fas fa-clock', 'fas fa-calendar', 'fas fa-user',
                'fas fa-users', 'fas fa-cog', 'fas fa-wrench', 'fas fa-tools',
                'fas fa-question-circle', 'fas fa-info-circle', 'fas fa-lightbulb', 'fas fa-star',
                'fas fa-heart', 'fas fa-thumbs-up', 'fas fa-thumbs-down', 'fas fa-flag',
                'fas fa-bell', 'fas fa-envelope', 'fas fa-phone', 'fas fa-comments',
                'fas fa-chat', 'fas fa-headset', 'fas fa-life-ring', 'fas fa-shield-alt'
            ];
            
            dropdown.innerHTML = '';
            icons.forEach(icon => {
                const iconDiv = document.createElement('div');
                iconDiv.className = 'icon-option';
                iconDiv.innerHTML = `<i class="${icon}"></i>`;
                iconDiv.onclick = () => selectIcon(icon);
                dropdown.appendChild(iconDiv);
            });
        }

        function selectIcon(iconClass) {
            document.getElementById('selectedIcon').className = iconClass;
            document.getElementById('quickIcon').value = iconClass;
            document.getElementById('iconDropdown').classList.remove('active');
        }

        // Advanced theme functions
        function updateColorPreview() {
            const primaryColor = document.getElementById('primaryColor').value;
            const secondaryColor = document.getElementById('secondaryColor').value;
            const backgroundColor = document.getElementById('backgroundColor').value;
            
            document.getElementById('primaryPreview').style.background = primaryColor;
            document.getElementById('secondaryPreview').style.background = secondaryColor;
            document.getElementById('backgroundPreview').style.background = backgroundColor;
        }

        function saveAdvancedTheme() {
            const primaryColor = document.getElementById('primaryColor').value;
            const secondaryColor = document.getElementById('secondaryColor').value;
            const backgroundColor = document.getElementById('backgroundColor').value;
            
            const themeData = {
                primary: primaryColor,
                secondary: secondaryColor,
                background: backgroundColor,
                timestamp: Date.now()
            };
            
            database.ref('theme').set(themeData)
                .then(() => {
                    applyTheme(themeData);
                    alert('Theme saved successfully!');
                })
                .catch(error => {
                    alert('Error saving theme: ' + error.message);
                });
        }

        function applyTheme(themeData) {
            document.documentElement.style.setProperty('--primary-color', themeData.primary);
            document.documentElement.style.setProperty('--secondary-color', themeData.secondary);
            document.documentElement.style.setProperty('--background-color', themeData.background);
            
            // Update all elements with primary color
            const primaryElements = document.querySelectorAll('.tab.active, .send-btn, .admin-btn, .message-avatar, .faq-question');
            primaryElements.forEach(el => {
                el.style.background = themeData.primary;
            });
        }

        function resetTheme() {
            const defaultTheme = {
                primary: '#ff4444',
                secondary: '#2a2a2a',
                background: '#1a1a1a'
            };
            
            document.getElementById('primaryColor').value = defaultTheme.primary;
            document.getElementById('secondaryColor').value = defaultTheme.secondary;
            document.getElementById('backgroundColor').value = defaultTheme.background;
            
            updateColorPreview();
            applyTheme(defaultTheme);
            
            database.ref('theme').set(defaultTheme)
                .then(() => {
                    alert('Theme reset to default!');
                });
        }

        // User chat management
        function loadUserChatList() {
            database.ref('users').once('value')
                .then(snapshot => {
                    const users = snapshot.val() || {};
                    const container = document.getElementById('userChatList');
                    
                    container.innerHTML = '<h5>Select a user to chat:</h5>';
                    
                    Object.keys(users).forEach(userId => {
                        const user = users[userId];
                        const userDiv = document.createElement('div');
                        userDiv.className = 'user-chat-item';
                        userDiv.innerHTML = `
                            <strong>${user.name}</strong> - ${user.phone}
                            <br><small>Last active: ${new Date(user.timestamp).toLocaleString()}</small>
                        `;
                        userDiv.onclick = () => selectUserForChat(userId, user);
                        container.appendChild(userDiv);
                    });
                });
        }

        function selectUserForChat(userId, user) {
            // Update active user
            document.querySelectorAll('.user-chat-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.user-chat-item').classList.add('active');
            event.target.closest('.user-chat-item').dataset.userId = userId;
            
            document.getElementById('selectedUserName').textContent = user.name;
            document.getElementById('selectedUserChat').style.display = 'block';
            
            // Load chat messages
            loadUserChatMessages(userId);
        }

        function loadUserChatMessages(userId) {
            database.ref(`chats/${userId}/messages`).once('value')
                .then(snapshot => {
                    const messages = snapshot.val() || {};
                    const container = document.getElementById('userChatMessages');
                    
                    container.innerHTML = '';
                    
                    Object.keys(messages).forEach(messageId => {
                        const message = messages[messageId];
                        const messageDiv = document.createElement('div');
                        messageDiv.style.marginBottom = '10px';
                        messageDiv.style.padding = '8px';
                        messageDiv.style.borderRadius = '6px';
                        messageDiv.style.background = message.sender === 'user' ? '#444' : '#ff4444';
                        messageDiv.style.color = 'white';
                        messageDiv.style.maxWidth = '80%';
                        messageDiv.style.marginLeft = message.sender === 'user' ? '0' : 'auto';
                        
                        messageDiv.innerHTML = `
                            <div><strong>${message.sender === 'user' ? 'User' : 'Admin'}:</strong></div>
                            <div>${message.text}</div>
                            <small>${new Date(message.timestamp).toLocaleTimeString()}</small>
                        `;
                        
                        container.appendChild(messageDiv);
                    });
                    
                    container.scrollTop = container.scrollHeight;
                });
        }

        function sendAdminMessage() {
            const messageText = document.getElementById('adminMessageInput').value.trim();
            if (!messageText) return;
            
            const activeUser = document.querySelector('.user-chat-item.active');
            if (!activeUser) {
                alert('Please select a user first');
                return;
            }
            
            // Get user ID from the active user item
            const userId = activeUser.dataset.userId;
            
            const message = {
                id: Date.now().toString(),
                text: messageText,
                sender: 'admin',
                timestamp: Date.now()
            };
            
            // Save to Firebase
            database.ref(`chats/${userId}/messages/${message.id}`).set(message)
                .then(() => {
                    document.getElementById('adminMessageInput').value = '';
                    loadUserChatMessages(userId);
                });
        }

        // Enhanced Quick Questions management
        function loadQuickMessagesList() {
            database.ref('quickQuestions').once('value')
                .then(snapshot => {
                    const quickQuestions = snapshot.val() || {};
                    const container = document.getElementById('categoryList');
                    container.innerHTML = '';
                    
                    Object.keys(quickQuestions).forEach(category => {
                        const questions = quickQuestions[category];
                        const categoryDiv = document.createElement('div');
                        categoryDiv.className = 'category-item';
                        categoryDiv.innerHTML = `
                            <h4>${category}</h4>
                            <div class="question-list">
                                ${Object.keys(questions).map(questionId => {
                                    const question = questions[questionId];
                                    return `
                                        <div class="question-item">
                                            <div class="question-text">${question.question}</div>
                                            <div class="question-actions">
                                                <button class="btn btn-secondary" onclick="editQuickQuestion('${category}', '${questionId}')">Edit</button>
                                                <button class="btn btn-danger" onclick="deleteQuickQuestion('${category}', '${questionId}')">Delete</button>
                                            </div>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        `;
                        container.appendChild(categoryDiv);
                    });
                });
        }

        function editQuickQuestion(category, questionId) {
            database.ref(`quickQuestions/${category}/${questionId}`).once('value')
                .then(snapshot => {
                    const question = snapshot.val();
                    if (question) {
                        document.getElementById('quickCategory').value = category;
                        document.getElementById('quickQuestion').value = question.question;
                        document.getElementById('quickResponse').value = question.response;
                        document.getElementById('quickIcon').value = question.icon;
                        
                        // Change form to edit mode
                        const form = document.getElementById('quickQuestionForm');
                        form.dataset.editMode = 'true';
                        form.dataset.editCategory = category;
                        form.dataset.editId = questionId;
                        
                        document.querySelector('#quickQuestionForm .btn-primary').textContent = 'Update Question';
                    }
                });
        }

        function deleteQuickQuestion(category, questionId) {
            if (confirm('Are you sure you want to delete this question?')) {
                database.ref(`quickQuestions/${category}/${questionId}`).remove()
                    .then(() => {
                        alert('Question deleted successfully!');
                        loadQuickMessagesList();
                    })
                    .catch(error => {
                        alert('Error deleting question: ' + error.message);
                    });
            }
        }

        // Enhanced FAQ management
        function loadFAQList() {
            database.ref('faqs').once('value')
                .then(snapshot => {
                    const faqs = snapshot.val() || {};
                    const container = document.getElementById('faqList');
                    
                    container.innerHTML = '<h4>Existing FAQs</h4>';
                    
                    // Group FAQs by category
                    const categories = {};
                    Object.keys(faqs).forEach(faqId => {
                        const faq = faqs[faqId];
                        if (!categories[faq.category]) {
                            categories[faq.category] = [];
                        }
                        categories[faq.category].push({ id: faqId, ...faq });
                    });
                    
                    Object.keys(categories).forEach(category => {
                        const categoryDiv = document.createElement('div');
                        categoryDiv.className = 'category-item';
                        categoryDiv.innerHTML = `
                            <h4>${category}</h4>
                            <div class="question-list">
                                ${categories[category].map(faq => `
                                    <div class="question-item">
                                        <div class="question-text">
                                            <strong>Q:</strong> ${faq.question}<br>
                                            <strong>A:</strong> ${faq.answer}
                                        </div>
                                        <div class="question-actions">
                                            <button class="btn btn-secondary" onclick="editFAQ('${faq.id}')">Edit</button>
                                            <button class="btn btn-danger" onclick="deleteFAQ('${faq.id}')">Delete</button>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        `;
                        container.appendChild(categoryDiv);
                    });
                });
        }

        function editFAQ(faqId) {
            database.ref(`faqs/${faqId}`).once('value')
                .then(snapshot => {
                    const faq = snapshot.val();
                    if (faq) {
                        document.getElementById('faqCategory').value = faq.category;
                        document.getElementById('faqQuestion').value = faq.question;
                        document.getElementById('faqAnswer').value = faq.answer;
                        
                        // Change form to edit mode
                        const form = document.getElementById('faqForm');
                        form.dataset.editMode = 'true';
                        form.dataset.editId = faqId;
                        
                        document.querySelector('#faqForm .btn-primary').textContent = 'Update FAQ';
                    }
                });
        }

        function deleteFAQ(faqId) {
            if (confirm('Are you sure you want to delete this FAQ?')) {
                database.ref(`faqs/${faqId}`).remove()
                    .then(() => {
                        alert('FAQ deleted successfully!');
                        loadFAQList();
                    })
                    .catch(error => {
                        alert('Error deleting FAQ: ' + error.message);
                    });
            }
        }

        // Enhanced user management
        function loadUserHistory() {
            database.ref('chatHistory').once('value')
                .then(snapshot => {
                    const history = snapshot.val() || {};
                    const container = document.getElementById('chatHistoryContainer');
                    
                    container.innerHTML = '<h4>Recent Chat History</h4>';
                    
                    // Group by user
                    const userHistory = {};
                    Object.keys(history).forEach(historyId => {
                        const item = history[historyId];
                        if (!userHistory[item.userId]) {
                            userHistory[item.userId] = [];
                        }
                        userHistory[item.userId].push(item);
                    });
                    
                    Object.keys(userHistory).forEach(userId => {
                        const userDiv = document.createElement('div');
                        userDiv.className = 'user-history-item';
                        userDiv.innerHTML = `
                            <h5>${userHistory[userId][0].userName} (${userHistory[userId][0].userPhone})</h5>
                            <div class="history-messages">
                                ${userHistory[userId].slice(-5).map(item => `
                                    <div class="history-message">
                                        <strong>${item.userName}:</strong> ${item.message}
                                        <br><small>${new Date(item.timestamp).toLocaleString()}</small>
                                    </div>
                                `).join('')}
                            </div>
                        `;
                        container.appendChild(userDiv);
                    });
                });
        }

        // Theme management
        function applyThemePreset(theme) {
            const themes = {
                dark: {
                    primary: '#ff4444',
                    secondary: '#444444',
                    background: '#1a1a1a'
                },
                light: {
                    primary: '#007bff',
                    secondary: '#6c757d',
                    background: '#ffffff'
                },
                blue: {
                    primary: '#007bff',
                    secondary: '#0056b3',
                    background: '#f8f9fa'
                },
                green: {
                    primary: '#28a745',
                    secondary: '#1e7e34',
                    background: '#f8f9fa'
                },
                purple: {
                    primary: '#6f42c1',
                    secondary: '#5a2d91',
                    background: '#f8f9fa'
                }
            };
            
            const selectedTheme = themes[theme];
            if (selectedTheme) {
                document.documentElement.style.setProperty('--primary-color', selectedTheme.primary);
                document.documentElement.style.setProperty('--secondary-color', selectedTheme.secondary);
                document.documentElement.style.setProperty('--background-color', selectedTheme.background);
                
                // Update color inputs
                document.getElementById('primaryColor').value = selectedTheme.primary;
                document.getElementById('secondaryColor').value = selectedTheme.secondary;
                document.getElementById('backgroundColor').value = selectedTheme.background;
            }
        }

        function saveTheme() {
            const primaryColor = document.getElementById('primaryColor').value;
            const secondaryColor = document.getElementById('secondaryColor').value;
            const backgroundColor = document.getElementById('backgroundColor').value;
            
            document.documentElement.style.setProperty('--primary-color', primaryColor);
            document.documentElement.style.setProperty('--secondary-color', secondaryColor);
            document.documentElement.style.setProperty('--background-color', backgroundColor);
            
            // Save to Firebase
            const themeData = {
                primary: primaryColor,
                secondary: secondaryColor,
                background: backgroundColor,
                timestamp: Date.now()
            };
            
            database.ref('theme').set(themeData)
                .then(() => {
                    alert('Theme saved successfully!');
                })
                .catch(error => {
                    alert('Error saving theme: ' + error.message);
                });
        }

        function resetTheme() {
            applyThemePreset('dark');
        }

        // Analytics
        function loadAnalytics() {
            // Load user statistics
            database.ref('users').once('value')
                .then(snapshot => {
                    const users = snapshot.val() || {};
                    document.getElementById('totalUsers').textContent = Object.keys(users).length;
                    document.getElementById('activeUsers').textContent = Object.keys(users).length; // Placeholder
                });
            
            // Load message statistics
            database.ref('chatHistory').once('value')
                .then(snapshot => {
                    const history = snapshot.val() || {};
                    document.getElementById('totalMessages').textContent = Object.keys(history).length;
                });
            
            // Load FAQ statistics
            database.ref('faqs').once('value')
                .then(snapshot => {
                    const faqs = snapshot.val() || {};
                    document.getElementById('totalFAQs').textContent = Object.keys(faqs).length;
                });
        }

        // Form helpers
        function clearFaqForm() {
            document.getElementById('faqForm').reset();
            const form = document.getElementById('faqForm');
            delete form.dataset.editMode;
            delete form.dataset.editId;
            document.querySelector('#faqForm .btn-primary').textContent = 'Add FAQ';
        }

        function clearQuickForm() {
            document.getElementById('quickQuestionForm').reset();
            const form = document.getElementById('quickQuestionForm');
            delete form.dataset.editMode;
            delete form.dataset.editCategory;
            delete form.dataset.editId;
            document.querySelector('#quickQuestionForm .btn-primary').textContent = 'Add Question';
        }

        // Setup admin event listeners
        function setupAdminEventListeners() {
            // Admin sidebar navigation
            document.querySelectorAll('.admin-sidebar-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const section = this.getAttribute('data-section');
                    if (section === 'close') {
                        hideAdminPanel();
                        return;
                    }
                    
                    // Update active button
                    document.querySelectorAll('.admin-sidebar-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show active section
                    document.querySelectorAll('.admin-section').forEach(s => s.classList.remove('active'));
                    document.getElementById(`adminSection${section.charAt(0).toUpperCase() + section.slice(1)}`).classList.add('active');
                });
            });

            // FAQ form
            document.getElementById('faqForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const form = this;
                const isEditMode = form.dataset.editMode === 'true';
                
                const category = document.getElementById('faqCategory').value;
                const question = document.getElementById('faqQuestion').value;
                const answer = document.getElementById('faqAnswer').value;

                const faqData = {
                    category: category,
                    question: question,
                    answer: answer,
                    timestamp: Date.now()
                };

                if (isEditMode) {
                    // Update existing FAQ
                    database.ref(`faqs/${form.dataset.editId}`).update(faqData)
                        .then(() => {
                            alert('FAQ updated successfully!');
                            clearFaqForm();
                            loadFAQList();
                        })
                        .catch(error => {
                            alert('Error updating FAQ: ' + error.message);
                        });
                } else {
                    // Add new FAQ
                    faqData.id = Date.now().toString();
                    database.ref(`faqs/${faqData.id}`).set(faqData)
                        .then(() => {
                            alert('FAQ added successfully!');
                            clearFaqForm();
                            loadFAQList();
                        })
                        .catch(error => {
                            alert('Error adding FAQ: ' + error.message);
                        });
                }
            });
            
            // Quick question form
            document.getElementById('quickQuestionForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const form = this;
                const isEditMode = form.dataset.editMode === 'true';
                
                const category = document.getElementById('quickCategory').value;
                const question = document.getElementById('quickQuestion').value;
                const response = document.getElementById('quickResponse').value;
                const icon = document.getElementById('quickIcon').value;

                const quickData = {
                    category: category,
                    question: question,
                    response: response,
                    icon: icon,
                    timestamp: Date.now()
                };

                if (isEditMode) {
                    // Update existing question
                    database.ref(`quickQuestions/${form.dataset.editCategory}/${form.dataset.editId}`).update(quickData)
                        .then(() => {
                            alert('Question updated successfully!');
                            clearQuickForm();
                            loadQuickMessagesList();
                        })
                        .catch(error => {
                            alert('Error updating question: ' + error.message);
                        });
                } else {
                    // Add new question
                    quickData.id = Date.now().toString();
                    database.ref(`quickQuestions/${category}/${quickData.id}`).set(quickData)
                        .then(() => {
                            alert('Question added successfully!');
                            clearQuickForm();
                            loadQuickMessagesList();
                        })
                        .catch(error => {
                            alert('Error adding question: ' + error.message);
                        });
                }
            });
            
            // User search
            document.getElementById('userSearchInput').addEventListener('input', filterUsers);
            
            // User filters
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    filterUsers();
                });
            });

            // Theme presets
            document.querySelectorAll('.preset-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.preset-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    applyThemePreset(this.getAttribute('data-theme'));
                });
            });
        }

        function filterUsers() {
            const searchTerm = document.getElementById('userSearchInput').value.toLowerCase();
            const activeFilter = document.querySelector('.filter-btn.active').getAttribute('data-filter');
            
            database.ref('users').once('value')
                .then(snapshot => {
                    const users = snapshot.val() || {};
                    const container = document.getElementById('userListContainer');
                    container.innerHTML = '';
                    
                    Object.keys(users).forEach(userId => {
                        const user = users[userId];
                        
                        // Apply search filter
                        if (searchTerm && !user.name.toLowerCase().includes(searchTerm) && 
                            !user.phone.includes(searchTerm)) {
                            return;
                        }
                        
                        // Apply status filter
                        if (activeFilter !== 'all') {
                            // You can implement actual online/offline logic here
                            const isOnline = true; // Placeholder
                            if (activeFilter === 'online' && !isOnline) return;
                            if (activeFilter === 'offline' && isOnline) return;
                        }
                        
                        const userDiv = document.createElement('div');
                        userDiv.className = 'user-item';
                        userDiv.innerHTML = `
                            <div class="user-info">
                                <div>
                                    <div class="user-name">${user.name}</div>
                                    <div class="user-phone">${user.phone}</div>
                                </div>
                                <div class="user-status online">Online</div>
                            </div>
                        `;
                        userDiv.onclick = () => openUserChat(user);
                        container.appendChild(userDiv);
                    });
                });
        }

        function openUserChat(user) {
            document.getElementById('selectedUserName').textContent = user.name;
            document.getElementById('userChatContainer').style.display = 'block';
            document.getElementById('userListContainer').style.display = 'none';
            
            // Load user's chat history
            loadUserChatHistory(user.id);
        }

        function loadUserChatHistory(userId) {
            const messagesContainer = document.getElementById('userChatMessages');
            messagesContainer.innerHTML = '';
            
            // Load from chatHistory
            database.ref('chatHistory').orderByChild('userId').equalTo(userId).once('value')
                .then(snapshot => {
                    const history = snapshot.val() || {};
                    Object.keys(history).forEach(historyId => {
                        const historyItem = history[historyId];
                        const messageDiv = document.createElement('div');
                        messageDiv.className = 'chat-message';
                        messageDiv.innerHTML = `
                            <div class="message-sender">${historyItem.userName}</div>
                            <div class="message-text">${historyItem.message}</div>
                            <div class="message-time">${new Date(historyItem.timestamp).toLocaleString()}</div>
                        `;
                        messagesContainer.appendChild(messageDiv);
                    });
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                });
        }

        function sendUserMessage() {
            const input = document.getElementById('userChatInput');
            const message = input.value.trim();
            if (!message) return;
            
            const selectedUser = document.getElementById('selectedUserName').textContent;
            // Here you would implement sending message to specific user
            // For now, just add to chat
            const messageDiv = document.createElement('div');
            messageDiv.className = 'chat-message admin-message';
            messageDiv.innerHTML = `
                <div class="message-sender">Admin</div>
                <div class="message-text">${message}</div>
                <div class="message-time">${new Date().toLocaleString()}</div>
            `;
            document.getElementById('userChatMessages').appendChild(messageDiv);
            input.value = '';
        }

        function backToUsers() {
            document.getElementById('userChatContainer').style.display = 'none';
            document.getElementById('userListContainer').style.display = 'block';
        }

        function manualStart() {
            console.log('Manual start triggered');
            hideLoadingScreen();
            showUserRegistration();
        }
            database.ref('quickMessages').once('value')
                .then(snapshot => {
                    const quickMessages = snapshot.val() || {};
                    const container = document.getElementById('quickMessagesList');
                    
                    container.innerHTML = '<h4>Manage Quick Messages</h4>';
                    
                    Object.keys(quickMessages).forEach(category => {
                        const categoryDiv = document.createElement('div');
                        categoryDiv.className = 'category-manager';
                        categoryDiv.innerHTML = `
                            <h5><i class="fas fa-folder"></i> ${category}</h5>
                            <button class="admin-btn" onclick="addQuestionToCategory('${category}')">Add Question</button>
                        `;
                        
                        const questionList = document.createElement('div');
                        questionList.className = 'question-list';
                        
                        Object.keys(quickMessages[category]).forEach(messageId => {
                            const message = quickMessages[category][messageId];
                            const questionDiv = document.createElement('div');
                            questionDiv.className = 'question-item';
                            questionDiv.innerHTML = `
                                <div><i class="${message.icon}"></i> <strong>${message.question}</strong></div>
                                <div style="margin: 5px 0; color: #ccc;">${message.response}</div>
                                <div>
                                    <button class="admin-btn" onclick="editQuickMessage('${category}', '${messageId}')">Edit</button>
                                    <button class="admin-btn" onclick="deleteQuickMessage('${category}', '${messageId}')">Delete</button>
                                </div>
                            `;
                            questionList.appendChild(questionDiv);
                        });
                        
                        categoryDiv.appendChild(questionList);
                        container.appendChild(categoryDiv);
                    });
                });
        }

        function addQuestionToCategory(category) {
            const question = prompt('Enter question:');
            if (!question) return;
            
            const response = prompt('Enter response:');
            if (!response) return;
            
            const icon = prompt('Enter icon class (e.g., fas fa-gamepad):');
            if (!icon) return;
            
            const messageData = {
                id: Date.now().toString(),
                category: category,
                question: question,
                response: response,
                icon: icon,
                timestamp: Date.now()
            };
            
            database.ref(`quickMessages/${category}/${messageData.id}`).set(messageData)
                .then(() => {
                    loadQuickMessagesList();
                });
        }

        function editQuickMessage(category, messageId) {
            database.ref(`quickMessages/${category}/${messageId}`).once('value')
                .then(snapshot => {
                    const message = snapshot.val();
                    if (!message) return;
                    
                    const question = prompt('Enter new question:', message.question);
                    if (!question) return;
                    
                    const response = prompt('Enter new response:', message.response);
                    if (!response) return;
                    
                    const icon = prompt('Enter new icon class:', message.icon);
                    if (!icon) return;
                    
                    const updatedMessage = {
                        ...message,
                        question: question,
                        response: response,
                        icon: icon
                    };
                    
                    database.ref(`quickMessages/${category}/${messageId}`).set(updatedMessage)
                        .then(() => {
                            loadQuickMessagesList();
                        });
                });
        }

        function showLoadingScreen() {
            const loadingScreen = document.getElementById('loadingScreen');
            if (loadingScreen) {
                loadingScreen.style.display = 'flex';
            }
        }

        function hideLoadingScreen() {
            const loadingScreen = document.getElementById('loadingScreen');
            if (loadingScreen) {
                loadingScreen.style.display = 'none';
            }
        }

        // Always hide loading screen after 5 seconds (fallback)
        setTimeout(() => {
          hideLoadingScreen();
        }, 5000);

        // Manual start function for fallback
        function manualStart() {
            console.log('Manual start triggered');
            hideLoadingScreen();
            showUserRegistration();
        }

        // Global error handler: hide loading screen on error
        window.addEventListener('error', function() {
          console.error('Global error detected');
          hideLoadingScreen();
        });

        // Load theme on startup
        database.ref('theme/primaryColor').once('value')
            .then(snapshot => {
                const savedColor = snapshot.val();
                if (savedColor) {
                    primaryColor = savedColor;
                    selectColor(savedColor);
                }
            });

        // Initialize default Aviator FAQs and Quick Questions
        function initializeDefaultData() {
            // Check if data already exists
            database.ref('faqs').once('value')
                .then(snapshot => {
                    if (!snapshot.val()) {
                        addDefaultFAQs();
                    }
                });

            database.ref('quickMessages').once('value')
                .then(snapshot => {
                    if (!snapshot.val()) {
                        addDefaultQuickQuestions();
                    }
                });
        }

        function addDefaultFAQs() {
            const defaultFAQs = [
                {
                    id: 'faq1',
                    category: 'Game Rules',
                    question: 'How does Aviator game work?',
                    answer: 'Aviator is a crash game where you place bets and cash out before the plane crashes. The multiplier increases over time, and you need to cash out before it crashes to win.',
                    timestamp: Date.now()
                },
                {
                    id: 'faq2',
                    category: 'Game Rules',
                    question: 'What is the maximum multiplier in Aviator?',
                    answer: 'The maximum multiplier in Aviator can go up to 100x or even higher, but it\'s very rare. Most crashes happen between 1.2x to 5x.',
                    timestamp: Date.now()
                },
                {
                    id: 'faq3',
                    category: 'Deposits',
                    question: 'How long do deposits take to appear?',
                    answer: 'Deposits are usually instant. If your deposit doesn\'t appear within 5 minutes, please contact support with your transaction ID.',
                    timestamp: Date.now()
                },
                {
                    id: 'faq4',
                    category: 'Deposits',
                    question: 'What payment methods are accepted?',
                    answer: 'We accept UPI, Paytm, PhonePe, Google Pay, and all major credit/debit cards. Bank transfers are also supported.',
                    timestamp: Date.now()
                },
                {
                    id: 'faq5',
                    category: 'Withdrawals',
                    question: 'How long do withdrawals take?',
                    answer: 'Withdrawals are processed within 24 hours. UPI withdrawals are usually instant, while bank transfers may take 1-3 business days.',
                    timestamp: Date.now()
                },
                {
                    id: 'faq6',
                    category: 'Withdrawals',
                    question: 'What is the minimum withdrawal amount?',
                    answer: 'The minimum withdrawal amount is â‚¹100. There is no maximum limit for verified accounts.',
                    timestamp: Date.now()
                },
                {
                    id: 'faq7',
                    category: 'Account',
                    question: 'How do I verify my account?',
                    answer: 'To verify your account, please provide your PAN card and Aadhaar card details. This is required for withdrawals above â‚¹10,000.',
                    timestamp: Date.now()
                },
                {
                    id: 'faq8',
                    category: 'Account',
                    question: 'I forgot my password, what should I do?',
                    answer: 'Click on "Forgot Password" on the login page. You will receive an OTP on your registered mobile number to reset your password.',
                    timestamp: Date.now()
                },
                {
                    id: 'faq9',
                    category: 'Technical',
                    question: 'The game is not loading, what should I do?',
                    answer: 'Please check your internet connection and try refreshing the page. If the problem persists, clear your browser cache and try again.',
                    timestamp: Date.now()
                },
                {
                    id: 'faq10',
                    category: 'Technical',
                    question: 'I got disconnected during a game, will I lose my bet?',
                    answer: 'If you were disconnected during a game, your bet will be automatically processed. Check your account balance and transaction history.',
                    timestamp: Date.now()
                }
            ];

            defaultFAQs.forEach(faq => {
                database.ref(`faqs/${faq.id}`).set(faq);
            });
        }

        function addDefaultQuickQuestions() {
            const defaultQuickMessages = {
                'Deposit Related': {
                    'deposit1': {
                        id: 'deposit1',
                        category: 'Deposit Related',
                        question: 'Deposit nahi aaya?',
                        response: 'Please check if the payment was successful. If the amount was deducted but not credited, please share your transaction ID and we will resolve it within 30 minutes.',
                        icon: 'fas fa-money-bill-wave',
                        timestamp: Date.now()
                    },
                    'deposit2': {
                        id: 'deposit2',
                        category: 'Deposit Related',
                        question: 'Deposit error aa raha hai',
                        response: 'Please try using a different payment method. If the problem persists, please contact our technical support team.',
                        icon: 'fas fa-exclamation-triangle',
                        timestamp: Date.now()
                    },
                    'deposit3': {
                        id: 'deposit3',
                        category: 'Deposit Related',
                        question: 'Wrong number bhar gaya',
                        response: 'Please provide the correct mobile number and we will update your account. You may need to verify with an OTP.',
                        icon: 'fas fa-mobile-alt',
                        timestamp: Date.now()
                    }
                },
                'Withdrawal Related': {
                    'withdraw1': {
                        id: 'withdraw1',
                        category: 'Withdrawal Related',
                        question: 'Withdrawal pending hai',
                        response: 'Withdrawals are processed within 24 hours. Please check your transaction status. If pending for more than 24 hours, contact support.',
                        icon: 'fas fa-clock',
                        timestamp: Date.now()
                    },
                    'withdraw2': {
                        id: 'withdraw2',
                        category: 'Withdrawal Related',
                        question: 'Withdrawal failed',
                        response: 'Please check if your account details are correct. Failed withdrawals are automatically refunded to your account balance.',
                        icon: 'fas fa-times-circle',
                        timestamp: Date.now()
                    },
                    'withdraw3': {
                        id: 'withdraw3',
                        category: 'Withdrawal Related',
                        question: 'Minimum withdrawal amount',
                        response: 'Minimum withdrawal amount is â‚¹100. Please ensure you have sufficient balance and your account is verified.',
                        icon: 'fas fa-info-circle',
                        timestamp: Date.now()
                    }
                },
                'Game Related': {
                    'game1': {
                        id: 'game1',
                        category: 'Game Related',
                        question: 'Game crash ho raha hai',
                        response: 'Please check your internet connection and try refreshing the page. If the problem continues, try using a different browser.',
                        icon: 'fas fa-gamepad',
                        timestamp: Date.now()
                    },
                    'game2': {
                        id: 'game2',
                        category: 'Game Related',
                        question: 'Bet place nahi ho raha',
                        response: 'Please check if you have sufficient balance. If the problem persists, try logging out and logging back in.',
                        icon: 'fas fa-dice',
                        timestamp: Date.now()
                    },
                    'game3': {
                        id: 'game3',
                        category: 'Game Related',
                        question: 'Game rules kya hain?',
                        response: 'Aviator is a crash game. Place your bet and cash out before the plane crashes. The longer you wait, the higher the multiplier, but also the higher the risk.',
                        icon: 'fas fa-question-circle',
                        timestamp: Date.now()
                    }
                },
                'Account Related': {
                    'account1': {
                        id: 'account1',
                        category: 'Account Related',
                        question: 'Password change karna hai',
                        response: 'Go to Account Settings > Change Password. You will need to enter your current password and new password.',
                        icon: 'fas fa-key',
                        timestamp: Date.now()
                    },
                    'account2': {
                        id: 'account2',
                        category: 'Account Related',
                        question: 'Account block ho gaya',
                        response: 'Please contact support with your user ID. We will investigate and resolve the issue within 24 hours.',
                        icon: 'fas fa-ban',
                        timestamp: Date.now()
                    },
                    'account3': {
                        id: 'account3',
                        category: 'Account Related',
                        question: 'KYC verification',
                        response: 'KYC is required for withdrawals above â‚¹10,000. Please upload your PAN card and Aadhaar card in the verification section.',
                        icon: 'fas fa-id-card',
                        timestamp: Date.now()
                    }
                }
            };

            Object.keys(defaultQuickMessages).forEach(category => {
                Object.keys(defaultQuickMessages[category]).forEach(messageId => {
                    database.ref(`quickMessages/${category}/${messageId}`).set(defaultQuickMessages[category][messageId]);
                });
            });
        }

        // Initialize default data when app starts
        function initializeDefaultData() {
            console.log('Initializing default data...');
            
            // Initialize default FAQs if they don't exist
            database.ref('faqs').once('value')
                .then(snapshot => {
                    if (!snapshot.exists()) {
                        console.log('Creating default FAQs...');
                        addDefaultFAQs();
                    }
                })
                .catch(error => {
                    console.error('Error checking FAQs:', error);
                });

            // Initialize default Quick Questions if they don't exist
            database.ref('quickQuestions').once('value')
                .then(snapshot => {
                    if (!snapshot.exists()) {
                        console.log('Creating default Quick Questions...');
                        addDefaultQuickQuestions();
                    }
                })
                .catch(error => {
                    console.error('Error checking Quick Questions:', error);
                });
        }

        function addDefaultFAQs() {
            const defaultFAQs = {
                'faq1': {
                    id: 'faq1',
                    category: 'Game Rules',
                    question: 'How does Aviator game work?',
                    answer: 'Aviator is a crash game where you bet on when to cash out before the multiplier crashes. The longer you wait, the higher the potential payout, but also the higher the risk of losing your bet.',
                    timestamp: Date.now()
                },
                'faq2': {
                    id: 'faq2',
                    category: 'Deposits',
                    question: 'How long do deposits take?',
                    answer: 'Most deposits are processed instantly. Bank transfers may take 1-3 business days. If your deposit is delayed, please contact support.',
                    timestamp: Date.now()
                },
                'faq3': {
                    id: 'faq3',
                    category: 'Withdrawals',
                    question: 'When will I receive my withdrawal?',
                    answer: 'Withdrawals are typically processed within 24 hours. Bank transfers may take 3-5 business days to appear in your account.',
                    timestamp: Date.now()
                },
                'faq4': {
                    id: 'faq4',
                    category: 'Account',
                    question: 'How do I reset my password?',
                    answer: 'Click on "Forgot Password" on the login page. You will receive a reset link via email or SMS.',
                    timestamp: Date.now()
                },
                'faq5': {
                    id: 'faq5',
                    category: 'Technical',
                    question: 'The game is not loading, what should I do?',
                    answer: 'Try refreshing the page, clearing your browser cache, or using a different browser. If the problem persists, contact support.',
                    timestamp: Date.now()
                }
            };

            database.ref('faqs').set(defaultFAQs)
                .then(() => {
                    console.log('Default FAQs created successfully');
                })
                .catch(error => {
                    console.error('Error creating default FAQs:', error);
                });
        }

        function addDefaultQuickQuestions() {
            const defaultQuickQuestions = {
                'Deposits': {
                    'q1': {
                        id: 'q1',
                        category: 'Deposits',
                        question: 'Deposit nahi aaya?',
                        response: 'Aapka deposit process ho raha hai. Please wait 5-10 minutes. Agar 15 minutes ke baad bhi nahi aaya to contact karein.',
                        icon: 'fas fa-money-bill-wave',
                        timestamp: Date.now()
                    },
                    'q2': {
                        id: 'q2',
                        category: 'Deposits',
                        question: 'Deposit error aa raha hai',
                        response: 'Please check your payment method and try again. Agar problem persist karta hai to different payment method try karein.',
                        icon: 'fas fa-exclamation-triangle',
                        timestamp: Date.now()
                    },
                    'q3': {
                        id: 'q3',
                        category: 'Deposits',
                        question: 'Wrong amount bhar gaya',
                        response: 'Don\'t worry! Extra amount automatically refund ho jayega within 24 hours. Contact support for immediate assistance.',
                        icon: 'fas fa-undo',
                        timestamp: Date.now()
                    }
                },
                'Withdrawals': {
                    'q1': {
                        id: 'q1',
                        category: 'Withdrawals',
                        question: 'Withdrawal pending hai',
                        response: 'Withdrawal process mein 24 hours lag sakte hain. Please wait. Agar 24 hours ke baad bhi pending hai to contact karein.',
                        icon: 'fas fa-clock',
                        timestamp: Date.now()
                    },
                    'q2': {
                        id: 'q2',
                        category: 'Withdrawals',
                        question: 'Withdrawal failed',
                        response: 'Please check your bank details and try again. Agar problem persist karta hai to different bank account try karein.',
                        icon: 'fas fa-times-circle',
                        timestamp: Date.now()
                    }
                },
                'Game': {
                    'q1': {
                        id: 'q1',
                        category: 'Game',
                        question: 'Game crash ho raha hai',
                        response: 'Please refresh the page or try after some time. Server maintenance ho sakta hai.',
                        icon: 'fas fa-gamepad',
                        timestamp: Date.now()
                    },
                    'q2': {
                        id: 'q2',
                        category: 'Game',
                        question: 'Bet place nahi ho ra',
                        response: 'Please check your balance and try again. Minimum bet amount check karein.',
                        icon: 'fas fa-coins',
                        timestamp: Date.now()
                    }
                },
                'Account': {
                    'q1': {
                        id: 'q1',
                        category: 'Account',
                        question: 'Password reset karna hai',
                        response: 'Forgot Password pe click karein. Email ya SMS se reset link milega.',
                        icon: 'fas fa-key',
                        timestamp: Date.now()
                    },
                    'q2': {
                        id: 'q2',
                        category: 'Account',
                        question: 'Account lock ho gaya',
                        response: 'Security reasons se account temporarily lock ho sakta hai. Contact support for immediate assistance.',
                        icon: 'fas fa-lock',
                        timestamp: Date.now()
                    }
                },
                'Technical': {
                    'q1': {
                        id: 'q1',
                        category: 'Technical',
                        question: 'App load nahi ho ra',
                        response: 'Please check your internet connection. Agar problem persist karta hai to app reinstall karein.',
                        icon: 'fas fa-wifi',
                        timestamp: Date.now()
                    },
                    'q2': {
                        id: 'q2',
                        category: 'Technical',
                        question: 'Login nahi ho ra',
                        response: 'Username aur password check karein. Agar forgot hai to reset karein.',
                        icon: 'fas fa-sign-in-alt',
                        timestamp: Date.now()
                    }
                }
            };

            database.ref('quickQuestions').set(defaultQuickQuestions)
                .then(() => {
                    console.log('Default Quick Questions created successfully');
                })
                .catch(error => {
                    console.error('Error creating default Quick Questions:', error);
                });
        }
    </script>
</body>
</html>